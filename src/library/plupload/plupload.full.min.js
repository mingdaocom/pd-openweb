/**
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.4.1
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2014-08-05
 */
!(function (e, t) {
  'use strict';
  function n(e, t) {
    for (var n, i = [], r = 0; r < e.length; ++r) {
      if (((n = a[e[r]] || o(e[r])), !n)) throw 'module definition dependecy not found: ' + e[r];
      i.push(n);
    }
    t.apply(null, i);
  }
  function i(e, i, r) {
    if ('string' != typeof e) throw 'invalid module definition, module id must be defined and be a string';
    if (i === t) throw 'invalid module definition, dependencies must be specified';
    if (r === t) throw 'invalid module definition, definition function must be specified';
    n(i, function () {
      a[e] = r.apply(null, arguments);
    });
  }
  function r(e) {
    return !!a[e];
  }
  function o(t) {
    for (var n = e, i = t.split(/[.\/]/), r = 0; r < i.length; ++r) {
      if (!n[i[r]]) return;
      n = n[i[r]];
    }
    return n;
  }
  function s(n) {
    var i, r, o, s, u;
    for (i = 0; i < n.length; i++) {
      (r = e), (o = n[i]), (s = o.split(/[.\/]/));
      for (var c = 0; c < s.length - 1; ++c) r[s[c]] === t && (r[s[c]] = {}), (r = r[s[c]]);
      r[s[s.length - 1]] = a[o];
    }
    if (e.AMDLC_TESTS) {
      u = e.privateModules || {};
      for (o in a) u[o] = a[o];
      for (i = 0; i < n.length; i++) delete u[n[i]];
      e.privateModules = u;
    }
  }
  var a = {},
    u = 'moxie/core/utils/Basic',
    c = 'moxie/core/utils/Env',
    l = 'moxie/core/I18n',
    d = 'moxie/core/utils/Mime',
    p = 'moxie/core/utils/Dom',
    f = 'moxie/core/Exceptions',
    h = 'moxie/core/EventTarget',
    m = 'moxie/runtime/Runtime',
    g = 'moxie/runtime/RuntimeClient',
    v = 'moxie/file/FileInput',
    y = 'moxie/core/utils/Encode',
    w = 'moxie/file/Blob',
    E = 'moxie/file/File',
    _ = 'moxie/file/FileDrop',
    b = 'moxie/file/FileReader',
    x = 'moxie/core/utils/Url',
    R = 'moxie/runtime/RuntimeTarget',
    A = 'moxie/file/FileReaderSync',
    O = 'moxie/xhr/FormData',
    T = 'moxie/xhr/XMLHttpRequest',
    S = 'moxie/runtime/html5/Runtime',
    C = 'moxie/core/utils/Events',
    N = 'moxie/runtime/html5/file/FileInput',
    D = 'moxie/runtime/html5/file/Blob',
    I = 'moxie/runtime/html5/file/FileDrop',
    L = 'moxie/runtime/html5/file/FileReader',
    M = 'moxie/runtime/html5/xhr/XMLHttpRequest',
    F = 'moxie/runtime/html4/Runtime',
    k = 'moxie/runtime/html4/file/FileInput',
    P = 'moxie/runtime/html4/file/FileReader',
    q = 'moxie/runtime/html4/xhr/XMLHttpRequest';
  i(u, [], function () {
    var e = function (e) {
        var t;
        return e === t
          ? 'undefined'
          : null === e
          ? 'null'
          : e.nodeType
          ? 'node'
          : {}.toString
              .call(e)
              .match(/\s([a-z|A-Z]+)/)[1]
              .toLowerCase();
      },
      t = function (i) {
        var r;
        return (
          n(arguments, function (o, a) {
            a > 0 &&
              n(o, function (n, o) {
                n !== r && (e(i[o]) === e(n) && ~s(e(n), ['array', 'object']) ? t(i[o], n) : (i[o] = n));
              });
          }),
          i
        );
      },
      n = function (t, n) {
        var i, r, o, s;
        if (t)
          if ('number' === e(t.length)) {
            for (o = 0, i = t.length; i > o; o++) if (n(t[o], o) === !1) return;
          } else if ('object' === e(t)) for (r in t) if (t.hasOwnProperty(r) && n(t[r], r) === !1) return;
      },
      i = function (t) {
        var n;
        if (!t || 'object' !== e(t)) return !0;
        for (n in t) return !1;
        return !0;
      },
      r = function (t, n) {
        function i(r) {
          'function' === e(t[r]) &&
            t[r](function (e) {
              ++r < o && !e ? i(r) : n(e);
            });
        }
        var r = 0,
          o = t.length;
        'function' !== e(n) && (n = function () {}), (t && t.length) || n(), i(r);
      },
      o = function (e, t) {
        var i = 0,
          r = e.length,
          o = new Array(r);
        n(e, function (e, n) {
          e(function (e) {
            if (e) return t(e);
            var s = [].slice.call(arguments);
            s.shift(), (o[n] = s), i++, i === r && (o.unshift(null), t.apply(this, o));
          });
        });
      },
      s = function (e, t) {
        if (t) {
          if (Array.prototype.indexOf) return Array.prototype.indexOf.call(t, e);
          for (var n = 0, i = t.length; i > n; n++) if (t[n] === e) return n;
        }
        return -1;
      },
      a = function (t, n) {
        var i = [];
        'array' !== e(t) && (t = [t]), 'array' !== e(n) && (n = [n]);
        for (var r in t) -1 === s(t[r], n) && i.push(t[r]);
        return i.length ? i : !1;
      },
      u = function (e, t) {
        var i = [];
        return (
          n(e, function (e) {
            -1 !== s(e, t) && i.push(e);
          }),
          i.length ? i : null
        );
      },
      c = function (e) {
        var t,
          n = [];
        for (t = 0; t < e.length; t++) n[t] = e[t];
        return n;
      },
      l = (function () {
        var e = 0;
        return function (t) {
          var n = new Date().getTime().toString(32),
            i;
          for (i = 0; 5 > i; i++) n += Math.floor(65535 * Math.random()).toString(32);
          return (t || 'o_') + n + (e++).toString(32);
        };
      })(),
      d = function (e) {
        return e
          ? String.prototype.trim
            ? String.prototype.trim.call(e)
            : e.toString().replace(/^\s*/, '').replace(/\s*$/, '')
          : e;
      },
      p = function (e) {
        if ('string' != typeof e) return e;
        var t = { t: 1099511627776, g: 1073741824, m: 1048576, k: 1024 },
          n;
        return (
          (e = /^([0-9\.]+)([tmgk]?)$/.exec(e.toLowerCase().replace(/[^0-9\.tmkg]/g, ''))),
          (n = e[2]),
          (e = +e[1]),
          t.hasOwnProperty(n) && (e *= t[n]),
          Math.floor(e)
        );
      },
      f = function (t) {
        var n = [].slice.call(arguments, 1);
        return t.replace(/%[a-z]/g, function () {
          var t = n.shift();
          return 'undefined' !== e(t) ? t : '';
        });
      };
    return {
      guid: l,
      typeOf: e,
      extend: t,
      each: n,
      isEmptyObj: i,
      inSeries: r,
      inParallel: o,
      inArray: s,
      arrayDiff: a,
      arrayIntersect: u,
      toArray: c,
      trim: d,
      sprintf: f,
      parseSizeStr: p,
    };
  }),
    i(c, [u], function (e) {
      function t(e, t, n) {
        var i = 0,
          r = 0,
          o = 0,
          s = { dev: -6, alpha: -5, a: -5, beta: -4, b: -4, RC: -3, rc: -3, '#': -2, p: 1, pl: 1 },
          a = function (e) {
            return (
              (e = ('' + e).replace(/[_\-+]/g, '.')),
              (e = e.replace(/([^.\d]+)/g, '.$1.').replace(/\.{2,}/g, '.')),
              e.length ? e.split('.') : [-8]
            );
          },
          u = function (e) {
            return e ? (isNaN(e) ? s[e] || -7 : parseInt(e, 10)) : 0;
          };
        for (e = a(e), t = a(t), r = Math.max(e.length, t.length), i = 0; r > i; i++)
          if (e[i] != t[i]) {
            if (((e[i] = u(e[i])), (t[i] = u(t[i])), e[i] < t[i])) {
              o = -1;
              break;
            }
            if (e[i] > t[i]) {
              o = 1;
              break;
            }
          }
        if (!n) return o;
        switch (n) {
          case '>':
          case 'gt':
            return o > 0;
          case '>=':
          case 'ge':
            return o >= 0;
          case '<=':
          case 'le':
            return 0 >= o;
          case '==':
          case '=':
          case 'eq':
            return 0 === o;
          case '<>':
          case '!=':
          case 'ne':
            return 0 !== o;
          case '':
          case '<':
          case 'lt':
            return 0 > o;
          default:
            return null;
        }
      }
      var n = (function (e) {
          var t = '',
            n = '?',
            i = 'function',
            r = 'undefined',
            o = 'object',
            s = 'major',
            a = 'model',
            u = 'name',
            c = 'type',
            l = 'vendor',
            d = 'version',
            p = 'architecture',
            f = 'console',
            h = 'mobile',
            m = 'tablet',
            g = {
              has: function (e, t) {
                return -1 !== t.toLowerCase().indexOf(e.toLowerCase());
              },
              lowerize: function (e) {
                return e.toLowerCase();
              },
            },
            v = {
              rgx: function () {
                for (var t, n = 0, s, a, u, c, l, d, p = arguments; n < p.length; n += 2) {
                  var f = p[n],
                    h = p[n + 1];
                  if (typeof t === r) {
                    t = {};
                    for (u in h) (c = h[u]), typeof c === o ? (t[c[0]] = e) : (t[c] = e);
                  }
                  for (s = a = 0; s < f.length; s++)
                    if ((l = f[s].exec(this.getUA()))) {
                      for (u = 0; u < h.length; u++)
                        (d = l[++a]),
                          (c = h[u]),
                          typeof c === o && c.length > 0
                            ? 2 == c.length
                              ? typeof c[1] == i
                                ? (t[c[0]] = c[1].call(this, d))
                                : (t[c[0]] = c[1])
                              : 3 == c.length
                              ? typeof c[1] !== i || (c[1].exec && c[1].test)
                                ? (t[c[0]] = d ? d.replace(c[1], c[2]) : e)
                                : (t[c[0]] = d ? c[1].call(this, d, c[2]) : e)
                              : 4 == c.length && (t[c[0]] = d ? c[3].call(this, d.replace(c[1], c[2])) : e)
                            : (t[c] = d ? d : e);
                      break;
                    }
                  if (l) break;
                }
                return t;
              },
              str: function (t, i) {
                for (var r in i)
                  if (typeof i[r] === o && i[r].length > 0) {
                    for (var s = 0; s < i[r].length; s++) if (g.has(i[r][s], t)) return r === n ? e : r;
                  } else if (g.has(i[r], t)) return r === n ? e : r;
                return t;
              },
            },
            y = {
              browser: {
                oldsafari: {
                  major: { 1: ['/8', '/1', '/3'], 2: '/4', '?': '/' },
                  version: {
                    '1.0': '/8',
                    1.2: '/1',
                    1.3: '/3',
                    '2.0': '/412',
                    '2.0.2': '/416',
                    '2.0.3': '/417',
                    '2.0.4': '/419',
                    '?': '/',
                  },
                },
              },
              device: { sprint: { model: { 'Evo Shift 4G': '7373KT' }, vendor: { HTC: 'APA', Sprint: 'Sprint' } } },
              os: {
                windows: {
                  version: {
                    ME: '4.90',
                    'NT 3.11': 'NT3.51',
                    'NT 4.0': 'NT4.0',
                    2000: 'NT 5.0',
                    XP: ['NT 5.1', 'NT 5.2'],
                    Vista: 'NT 6.0',
                    7: 'NT 6.1',
                    8: 'NT 6.2',
                    8.1: 'NT 6.3',
                    RT: 'ARM',
                  },
                },
              },
            },
            w = {
              browser: [
                [
                  /(opera\smini)\/([\w\.-]+)/i,
                  /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,
                  /(opera).+version\/([\w\.]+)/i,
                  /(opera)[\/\s]+([\w\.]+)/i,
                ],
                [u, d],
                [/\s(opr)\/([\w\.]+)/i],
                [[u, 'Opera'], d],
                [
                  /(kindle)\/([\w\.]+)/i,
                  /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,
                  /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,
                  /(?:ms|\()(ie)\s([\w\.]+)/i,
                  /(rekonq)\/([\w\.]+)*/i,
                  /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i,
                ],
                [u, d],
                [/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],
                [[u, 'IE'], d],
                [/(edge)\/((\d+)?[\w\.]+)/i],
                [u, d],
                [/(yabrowser)\/([\w\.]+)/i],
                [[u, 'Yandex'], d],
                [/(comodo_dragon)\/([\w\.]+)/i],
                [[u, /_/g, ' '], d],
                [
                  /(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,
                  /(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i,
                ],
                [u, d],
                [/(dolfin)\/([\w\.]+)/i],
                [[u, 'Dolphin'], d],
                [/((?:android.+)crmo|crios)\/([\w\.]+)/i],
                [[u, 'Chrome'], d],
                [/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],
                [d, [u, 'MIUI Browser']],
                [/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],
                [d, [u, 'Android Browser']],
                [/FBAV\/([\w\.]+);/i],
                [d, [u, 'Facebook']],
                [/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],
                [d, [u, 'Mobile Safari']],
                [/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],
                [d, u],
                [/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],
                [u, [d, v.str, y.browser.oldsafari.version]],
                [/(konqueror)\/([\w\.]+)/i, /(webkit|khtml)\/([\w\.]+)/i],
                [u, d],
                [/(navigator|netscape)\/([\w\.-]+)/i],
                [[u, 'Netscape'], d],
                [
                  /(swiftfox)/i,
                  /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
                  /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,
                  /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,
                  /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,
                  /(links)\s\(([\w\.]+)/i,
                  /(gobrowser)\/?([\w\.]+)*/i,
                  /(ice\s?browser)\/v?([\w\._]+)/i,
                  /(mosaic)[\/\s]([\w\.]+)/i,
                ],
                [u, d],
              ],
              engine: [
                [/windows.+\sedge\/([\w\.]+)/i],
                [d, [u, 'EdgeHTML']],
                [
                  /(presto)\/([\w\.]+)/i,
                  /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,
                  /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,
                  /(icab)[\/\s]([23]\.[\d\.]+)/i,
                ],
                [u, d],
                [/rv\:([\w\.]+).*(gecko)/i],
                [d, u],
              ],
              os: [
                [/microsoft\s(windows)\s(vista|xp)/i],
                [u, d],
                [
                  /(windows)\snt\s6\.2;\s(arm)/i,
                  /(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i,
                ],
                [u, [d, v.str, y.os.windows.version]],
                [/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],
                [
                  [u, 'Windows'],
                  [d, v.str, y.os.windows.version],
                ],
                [/\((bb)(10);/i],
                [[u, 'BlackBerry'], d],
                [
                  /(blackberry)\w*\/?([\w\.]+)*/i,
                  /(tizen)[\/\s]([\w\.]+)/i,
                  /(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,
                  /linux;.+(sailfish);/i,
                ],
                [u, d],
                [/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],
                [[u, 'Symbian'], d],
                [/\((series40);/i],
                [u],
                [/mozilla.+\(mobile;.+gecko.+firefox/i],
                [[u, 'Firefox OS'], d],
                [
                  /(nintendo|playstation)\s([wids3portablevu]+)/i,
                  /(mint)[\/\s\(]?(\w+)*/i,
                  /(mageia|vectorlinux)[;\s]/i,
                  /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,
                  /(hurd|linux)\s?([\w\.]+)*/i,
                  /(gnu)\s?([\w\.]+)*/i,
                ],
                [u, d],
                [/(cros)\s[\w]+\s([\w\.]+\w)/i],
                [[u, 'Chromium OS'], d],
                [/(sunos)\s?([\w\.]+\d)*/i],
                [[u, 'Solaris'], d],
                [/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],
                [u, d],
                [/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],
                [
                  [u, 'iOS'],
                  [d, /_/g, '.'],
                ],
                [/(mac\sos\sx)\s?([\w\s\.]+\w)*/i, /(macintosh|mac(?=_powerpc)\s)/i],
                [
                  [u, 'Mac OS'],
                  [d, /_/g, '.'],
                ],
                [
                  /((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,
                  /(haiku)\s(\w+)/i,
                  /(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,
                  /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,
                  /(unix)\s?([\w\.]+)*/i,
                ],
                [u, d],
              ],
            },
            E = function (e) {
              var n = e || (window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : t);
              (this.getBrowser = function () {
                return v.rgx.apply(this, w.browser);
              }),
                (this.getEngine = function () {
                  return v.rgx.apply(this, w.engine);
                }),
                (this.getOS = function () {
                  return v.rgx.apply(this, w.os);
                }),
                (this.getResult = function () {
                  return { ua: this.getUA(), browser: this.getBrowser(), engine: this.getEngine(), os: this.getOS() };
                }),
                (this.getUA = function () {
                  return n;
                }),
                (this.setUA = function (e) {
                  return (n = e), this;
                }),
                this.setUA(n);
            };
          return E;
        })(),
        i = (function () {
          var t = {
            define_property: (function () {
              return !1;
            })(),
            create_canvas: (function () {
              var e = document.createElement('canvas');
              return !(!e.getContext || !e.getContext('2d'));
            })(),
            return_response_type: function (t) {
              try {
                if (-1 !== e.inArray(t, ['', 'text', 'document'])) return !0;
                if (window.XMLHttpRequest) {
                  var n = new XMLHttpRequest();
                  if ((n.open('get', '/'), 'responseType' in n))
                    return (n.responseType = t), n.responseType !== t ? !1 : !0;
                }
              } catch (i) {}
              return !1;
            },
            use_data_uri: (function () {
              var e = new Image();
              return (
                (e.onload = function () {
                  t.use_data_uri = 1 === e.width && 1 === e.height;
                }),
                setTimeout(function () {
                  e.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==';
                }, 1),
                !1
              );
            })(),
            use_data_uri_over32kb: function () {
              return t.use_data_uri && ('IE' !== o.browser || o.version >= 9);
            },
            use_data_uri_of: function (e) {
              return (t.use_data_uri && 33e3 > e) || t.use_data_uri_over32kb();
            },
            use_fileinput: function () {
              if (
                navigator.userAgent.match(
                  /(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/,
                )
              )
                return !1;
              var e = document.createElement('input');
              return e.setAttribute('type', 'file'), !e.disabled;
            },
          };
          return function (n) {
            var i = [].slice.call(arguments);
            return i.shift(), 'function' === e.typeOf(t[n]) ? t[n].apply(this, i) : !!t[n];
          };
        })(),
        r = new n().getResult(),
        o = {
          can: i,
          uaParser: n,
          browser: r.browser.name,
          version: r.browser.version,
          os: r.os.name,
          osVersion: r.os.version,
          verComp: t,
          swf_url: '../flash/Moxie.swf',
          xap_url: '../silverlight/Moxie.xap',
          global_event_dispatcher: 'moxie.core.EventTarget.instance.dispatchEvent',
        };
      return (o.OS = o.os), o;
    }),
    i(l, [u], function (e) {
      var t = {};
      return {
        addI18n: function (n) {
          return e.extend(t, n);
        },
        translate: function (e) {
          return t[e] || e;
        },
        _: function (e) {
          return this.translate(e);
        },
        sprintf: function (t) {
          var n = [].slice.call(arguments, 1);
          return t.replace(/%[a-z]/g, function () {
            var t = n.shift();
            return 'undefined' !== e.typeOf(t) ? t : '';
          });
        },
      };
    }),
    i(d, [u, l], function (e, t) {
      var n =
          'application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe',
        i = {
          mimes: {},
          extensions: {},
          addMimeType: function (e) {
            var t = e.split(/,/),
              n,
              i,
              r;
            for (n = 0; n < t.length; n += 2) {
              for (r = t[n + 1].split(/ /), i = 0; i < r.length; i++) this.mimes[r[i]] = t[n];
              this.extensions[t[n]] = r;
            }
          },
          extList2mimes: function (t, n) {
            var i = this,
              r,
              o,
              s,
              a,
              u = [];
            for (o = 0; o < t.length; o++)
              for (r = t[o].extensions.split(/\s*,\s*/), s = 0; s < r.length; s++) {
                if ('*' === r[s]) return [];
                if (((a = i.mimes[r[s]]), a && -1 === e.inArray(a, u) && u.push(a), n && /^\w+$/.test(r[s])))
                  u.push('.' + r[s]);
                else if (!a) return [];
              }
            return u;
          },
          mimes2exts: function (t) {
            var n = this,
              i = [];
            return (
              e.each(t, function (t) {
                if ('*' === t) return (i = []), !1;
                var r = t.match(/^(\w+)\/(\*|\w+)$/);
                r &&
                  ('*' === r[2]
                    ? e.each(n.extensions, function (e, t) {
                        new RegExp('^' + r[1] + '/').test(t) && [].push.apply(i, n.extensions[t]);
                      })
                    : n.extensions[t] && [].push.apply(i, n.extensions[t]));
              }),
              i
            );
          },
          mimes2extList: function (n) {
            var i = [],
              r = [];
            return (
              'string' === e.typeOf(n) && (n = e.trim(n).split(/\s*,\s*/)),
              (r = this.mimes2exts(n)),
              i.push({ title: t.translate('Files'), extensions: r.length ? r.join(',') : '*' }),
              (i.mimes = n),
              i
            );
          },
          getFileExtension: function (e) {
            var t = e && e.match(/\.([^.]+)$/);
            return t ? t[1].toLowerCase() : '';
          },
          getFileMime: function (e) {
            return this.mimes[this.getFileExtension(e)] || '';
          },
        };
      return i.addMimeType(n), i;
    }),
    i(p, [c], function (e) {
      var t = function (e) {
          return 'string' != typeof e ? e : document.getElementById(e);
        },
        n = function (e, t) {
          if (!e.className) return !1;
          var n = new RegExp('(^|\\s+)' + t + '(\\s+|$)');
          return n.test(e.className);
        },
        i = function (e, t) {
          n(e, t) || (e.className = e.className ? e.className.replace(/\s+$/, '') + ' ' + t : t);
        },
        r = function (e, t) {
          if (e.className) {
            var n = new RegExp('(^|\\s+)' + t + '(\\s+|$)');
            e.className = e.className.replace(n, function (e, t, n) {
              return ' ' === t && ' ' === n ? ' ' : '';
            });
          }
        },
        o = function (e, t) {
          return e.currentStyle
            ? e.currentStyle[t]
            : window.getComputedStyle
            ? window.getComputedStyle(e, null)[t]
            : void 0;
        },
        s = function (t, n) {
          function i(e) {
            var t,
              n,
              i = 0,
              r = 0;
            return (
              e &&
                ((n = e.getBoundingClientRect()),
                (t = 'CSS1Compat' === a.compatMode ? a.documentElement : a.body),
                (i = n.left + t.scrollLeft),
                (r = n.top + t.scrollTop)),
              { x: i, y: r }
            );
          }
          var r = 0,
            o = 0,
            s,
            a = document,
            u,
            c;
          if (
            ((t = t),
            (n = n || a.body),
            t && t.getBoundingClientRect && 'IE' === e.browser && (!a.documentMode || a.documentMode < 8))
          )
            return (u = i(t)), (c = i(n)), { x: u.x - c.x, y: u.y - c.y };
          for (s = t; s && s != n && s.nodeType; )
            (r += s.offsetLeft || 0), (o += s.offsetTop || 0), (s = s.offsetParent);
          for (s = t.parentNode; s && s != n && s.nodeType; )
            (r -= s.scrollLeft || 0), (o -= s.scrollTop || 0), (s = s.parentNode);
          return { x: r, y: o };
        },
        a = function (e) {
          return { w: e.offsetWidth || e.clientWidth, h: e.offsetHeight || e.clientHeight };
        };
      return { get: t, hasClass: n, addClass: i, removeClass: r, getStyle: o, getPos: s, getSize: a };
    }),
    i(f, [u], function (e) {
      function t(e, t) {
        var n;
        for (n in e) if (e[n] === t) return n;
        return null;
      }
      return {
        RuntimeError: (function () {
          function n(e) {
            (this.code = e), (this.name = t(i, e)), (this.message = this.name + ': RuntimeError ' + this.code);
          }
          var i = { NOT_INIT_ERR: 1, NOT_SUPPORTED_ERR: 9, JS_ERR: 4 };
          return e.extend(n, i), (n.prototype = Error.prototype), n;
        })(),
        OperationNotAllowedException: (function () {
          function t(e) {
            (this.code = e), (this.name = 'OperationNotAllowedException');
          }
          return e.extend(t, { NOT_ALLOWED_ERR: 1 }), (t.prototype = Error.prototype), t;
        })(),
        ImageError: (function () {
          function n(e) {
            (this.code = e), (this.name = t(i, e)), (this.message = this.name + ': ImageError ' + this.code);
          }
          var i = { WRONG_FORMAT: 1, MAX_RESOLUTION_ERR: 2, INVALID_META_ERR: 3 };
          return e.extend(n, i), (n.prototype = Error.prototype), n;
        })(),
        FileException: (function () {
          function n(e) {
            (this.code = e), (this.name = t(i, e)), (this.message = this.name + ': FileException ' + this.code);
          }
          var i = {
            NOT_FOUND_ERR: 1,
            SECURITY_ERR: 2,
            ABORT_ERR: 3,
            NOT_READABLE_ERR: 4,
            ENCODING_ERR: 5,
            NO_MODIFICATION_ALLOWED_ERR: 6,
            INVALID_STATE_ERR: 7,
            SYNTAX_ERR: 8,
          };
          return e.extend(n, i), (n.prototype = Error.prototype), n;
        })(),
        DOMException: (function () {
          function n(e) {
            (this.code = e), (this.name = t(i, e)), (this.message = this.name + ': DOMException ' + this.code);
          }
          var i = {
            INDEX_SIZE_ERR: 1,
            DOMSTRING_SIZE_ERR: 2,
            HIERARCHY_REQUEST_ERR: 3,
            WRONG_DOCUMENT_ERR: 4,
            INVALID_CHARACTER_ERR: 5,
            NO_DATA_ALLOWED_ERR: 6,
            NO_MODIFICATION_ALLOWED_ERR: 7,
            NOT_FOUND_ERR: 8,
            NOT_SUPPORTED_ERR: 9,
            INUSE_ATTRIBUTE_ERR: 10,
            INVALID_STATE_ERR: 11,
            SYNTAX_ERR: 12,
            INVALID_MODIFICATION_ERR: 13,
            NAMESPACE_ERR: 14,
            INVALID_ACCESS_ERR: 15,
            VALIDATION_ERR: 16,
            TYPE_MISMATCH_ERR: 17,
            SECURITY_ERR: 18,
            NETWORK_ERR: 19,
            ABORT_ERR: 20,
            URL_MISMATCH_ERR: 21,
            QUOTA_EXCEEDED_ERR: 22,
            TIMEOUT_ERR: 23,
            INVALID_NODE_TYPE_ERR: 24,
            DATA_CLONE_ERR: 25,
          };
          return e.extend(n, i), (n.prototype = Error.prototype), n;
        })(),
        EventException: (function () {
          function t(e) {
            (this.code = e), (this.name = 'EventException');
          }
          return e.extend(t, { UNSPECIFIED_EVENT_TYPE_ERR: 0 }), (t.prototype = Error.prototype), t;
        })(),
      };
    }),
    i(h, [c, f, u], function (e, t, n) {
      function i() {
        var e = {};
        n.extend(this, {
          uid: null,
          init: function () {
            this.uid || (this.uid = n.guid('uid_'));
          },
          addEventListener: function (t, i, r, o) {
            var s = this,
              a;
            return (
              this.hasOwnProperty('uid') || (this.uid = n.guid('uid_')),
              (t = n.trim(t)),
              /\s/.test(t)
                ? void n.each(t.split(/\s+/), function (e) {
                    s.addEventListener(e, i, r, o);
                  })
                : ((t = t.toLowerCase()),
                  (r = parseInt(r, 10) || 0),
                  (a = (e[this.uid] && e[this.uid][t]) || []),
                  a.push({ fn: i, priority: r, scope: o || this }),
                  e[this.uid] || (e[this.uid] = {}),
                  void (e[this.uid][t] = a))
            );
          },
          hasEventListener: function (t) {
            var n = t ? e[this.uid] && e[this.uid][t] : e[this.uid];
            return n ? n : !1;
          },
          removeEventListener: function (t, i) {
            t = t.toLowerCase();
            var r = e[this.uid] && e[this.uid][t],
              o;
            if (r) {
              if (i) {
                for (o = r.length - 1; o >= 0; o--)
                  if (r[o].fn === i) {
                    r.splice(o, 1);
                    break;
                  }
              } else r = [];
              r.length || (delete e[this.uid][t], n.isEmptyObj(e[this.uid]) && delete e[this.uid]);
            }
          },
          removeAllEventListeners: function () {
            e[this.uid] && delete e[this.uid];
          },
          dispatchEvent: function (i) {
            var r,
              o,
              s,
              a,
              u = {},
              c = !0,
              l;
            if ('string' !== n.typeOf(i)) {
              if (((a = i), 'string' !== n.typeOf(a.type)))
                throw new t.EventException(t.EventException.UNSPECIFIED_EVENT_TYPE_ERR);
              (i = a.type),
                a.total !== l && a.loaded !== l && ((u.total = a.total), (u.loaded = a.loaded)),
                (u.async = a.async || !1);
            }
            if (
              (-1 !== i.indexOf('::')
                ? !(function (e) {
                    (r = e[0]), (i = e[1]);
                  })(i.split('::'))
                : (r = this.uid),
              (i = i.toLowerCase()),
              (o = e[r] && e[r][i]))
            ) {
              o.sort(function (e, t) {
                return t.priority - e.priority;
              }),
                (s = [].slice.call(arguments)),
                s.shift(),
                (u.type = i),
                s.unshift(u);
              var d = [];
              n.each(o, function (e) {
                (s[0].target = e.scope),
                  u.async
                    ? d.push(function (t) {
                        setTimeout(function () {
                          t(e.fn.apply(e.scope, s) === !1);
                        }, 1);
                      })
                    : d.push(function (t) {
                        t(e.fn.apply(e.scope, s) === !1);
                      });
              }),
                d.length &&
                  n.inSeries(d, function (e) {
                    c = !e;
                  });
            }
            return c;
          },
          bind: function () {
            this.addEventListener.apply(this, arguments);
          },
          unbind: function () {
            this.removeEventListener.apply(this, arguments);
          },
          unbindAll: function () {
            this.removeAllEventListeners.apply(this, arguments);
          },
          trigger: function () {
            return this.dispatchEvent.apply(this, arguments);
          },
          handleEventProps: function (e) {
            var t = this;
            this.bind(e.join(' '), function (e) {
              var t = 'on' + e.type.toLowerCase();
              'function' === n.typeOf(this[t]) && this[t].apply(this, arguments);
            }),
              n.each(e, function (e) {
                (e = 'on' + e.toLowerCase(e)), 'undefined' === n.typeOf(t[e]) && (t[e] = null);
              });
          },
        });
      }
      return (i.instance = new i()), i;
    }),
    i(m, [c, u, p, h], function (e, t, n, i) {
      function r(e, i, o, a, u) {
        var c = this,
          l,
          d = t.guid(i + '_'),
          p = u || 'browser';
        (e = e || {}),
          (s[d] = this),
          (o = t.extend(
            {
              access_binary: !1,
              access_image_binary: !1,
              display_media: !1,
              do_cors: !1,
              drag_and_drop: !1,
              filter_by_extension: !0,
              resize_image: !1,
              report_upload_progress: !1,
              return_response_headers: !1,
              return_response_type: !1,
              return_status_code: !0,
              send_custom_headers: !1,
              select_file: !1,
              select_folder: !1,
              select_multiple: !0,
              send_binary_string: !1,
              send_browser_cookies: !0,
              send_multipart: !0,
              slice_blob: !1,
              stream_upload: !1,
              summon_file_dialog: !1,
              upload_filesize: !0,
              use_http_method: !0,
            },
            o,
          )),
          e.preferred_caps && (p = r.getMode(a, e.preferred_caps, p)),
          (l = (function () {
            var e = {};
            return {
              exec: function (t, n, i, r) {
                return l[n] && (e[t] || (e[t] = { context: this, instance: new l[n]() }), e[t].instance[i])
                  ? e[t].instance[i].apply(this, r)
                  : void 0;
              },
              removeInstance: function (t) {
                delete e[t];
              },
              removeAllInstances: function () {
                var n = this;
                t.each(e, function (e, i) {
                  'function' === t.typeOf(e.instance.destroy) && e.instance.destroy.call(e.context),
                    n.removeInstance(i);
                });
              },
            };
          })()),
          t.extend(this, {
            initialized: !1,
            uid: d,
            type: i,
            mode: r.getMode(a, e.required_caps, p),
            shimid: d + '_container',
            clients: 0,
            options: e,
            can: function (e, n) {
              var i = arguments[2] || o;
              if (
                ('string' === t.typeOf(e) && 'undefined' === t.typeOf(n) && (e = r.parseCaps(e)),
                'object' === t.typeOf(e))
              ) {
                for (var s in e) if (!this.can(s, e[s], i)) return !1;
                return !0;
              }
              return 'function' === t.typeOf(i[e]) ? i[e].call(this, n) : n === i[e];
            },
            getShimContainer: function () {
              var e,
                i = n.get(this.shimid);
              return (
                i ||
                  ((e = n.get(this.options.container) || document.body),
                  (i = document.createElement('div')),
                  (i.id = this.shimid),
                  (i.className = 'moxie-shim moxie-shim-' + this.type),
                  t.extend(i.style, {
                    position: 'absolute',
                    top: '0px',
                    left: '0px',
                    width: '1px',
                    height: '1px',
                    overflow: 'hidden',
                  }),
                  e.appendChild(i),
                  (e = null)),
                i
              );
            },
            getShim: function () {
              return l;
            },
            shimExec: function (e, t) {
              var n = [].slice.call(arguments, 2);
              return c.getShim().exec.call(this, this.uid, e, t, n);
            },
            exec: function (e, t) {
              var n = [].slice.call(arguments, 2);
              return c[e] && c[e][t] ? c[e][t].apply(this, n) : c.shimExec.apply(this, arguments);
            },
            destroy: function () {
              if (c) {
                var e = n.get(this.shimid);
                e && e.parentNode.removeChild(e),
                  l && l.removeAllInstances(),
                  this.unbindAll(),
                  delete s[this.uid],
                  (this.uid = null),
                  (d = c = l = e = null);
              }
            },
          }),
          this.mode && e.required_caps && !this.can(e.required_caps) && (this.mode = !1);
      }
      var o = {},
        s = {};
      return (
        (r.order = 'html5,flash,silverlight,html4'),
        (r.getRuntime = function (e) {
          return s[e] ? s[e] : !1;
        }),
        (r.addConstructor = function (e, t) {
          (t.prototype = i.instance), (o[e] = t);
        }),
        (r.getConstructor = function (e) {
          return o[e] || null;
        }),
        (r.getInfo = function (e) {
          var t = r.getRuntime(e);
          return t
            ? {
                uid: t.uid,
                type: t.type,
                mode: t.mode,
                can: function () {
                  return t.can.apply(t, arguments);
                },
              }
            : null;
        }),
        (r.parseCaps = function (e) {
          var n = {};
          return 'string' !== t.typeOf(e)
            ? e || {}
            : (t.each(e.split(','), function (e) {
                n[e] = !0;
              }),
              n);
        }),
        (r.can = function (e, t) {
          var n,
            i = r.getConstructor(e),
            o;
          return i ? ((n = new i({ required_caps: t })), (o = n.mode), n.destroy(), !!o) : !1;
        }),
        (r.thatCan = function (e, t) {
          var n = (t || r.order).split(/\s*,\s*/);
          for (var i in n) if (r.can(n[i], e)) return n[i];
          return null;
        }),
        (r.getMode = function (e, n, i) {
          var r = null;
          if (('undefined' === t.typeOf(i) && (i = 'browser'), n && !t.isEmptyObj(e))) {
            if (
              (t.each(n, function (n, i) {
                if (e.hasOwnProperty(i)) {
                  var o = e[i](n);
                  if (('string' == typeof o && (o = [o]), r)) {
                    if (!(r = t.arrayIntersect(r, o))) return (r = !1);
                  } else r = o;
                }
              }),
              r)
            )
              return -1 !== t.inArray(i, r) ? i : r[0];
            if (r === !1) return !1;
          }
          return i;
        }),
        (r.capTrue = function () {
          return !0;
        }),
        (r.capFalse = function () {
          return !1;
        }),
        (r.capTest = function (e) {
          return function () {
            return !!e;
          };
        }),
        r
      );
    }),
    i(g, [c, f, u, m], function (e, t, n, i) {
      return function r() {
        var e;
        n.extend(this, {
          connectRuntime: function (r) {
            function o(n) {
              var a, u;
              return n.length
                ? ((a = n.shift().toLowerCase()),
                  (u = i.getConstructor(a))
                    ? ((e = new u(r)),
                      e.bind('Init', function () {
                        (e.initialized = !0),
                          setTimeout(function () {
                            e.clients++, s.trigger('RuntimeInit', e);
                          }, 1);
                      }),
                      e.bind('Error', function () {
                        e.destroy(), o(n);
                      }),
                      e.mode ? void e.init() : void e.trigger('Error'))
                    : void o(n))
                : (s.trigger('RuntimeError', new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR)), void (e = null));
            }
            var s = this,
              a;
            if (('string' === n.typeOf(r) ? (a = r) : 'string' === n.typeOf(r.ruid) && (a = r.ruid), a)) {
              if ((e = i.getRuntime(a))) return e.clients++, e;
              throw new t.RuntimeError(t.RuntimeError.NOT_INIT_ERR);
            }
            o((r.runtime_order || i.order).split(/\s*,\s*/));
          },
          disconnectRuntime: function () {
            e && --e.clients <= 0 && e.destroy(), (e = null);
          },
          getRuntime: function () {
            return e && e.uid ? e : (e = null);
          },
          exec: function () {
            return e ? e.exec.apply(this, arguments) : null;
          },
          can: function (t) {
            return e ? e.can(t) : !1;
          },
        });
      };
    }),
    i(v, [u, c, d, p, f, h, l, m, g], function (e, t, n, i, r, o, s, a, u) {
      function c(t) {
        var o = this,
          c,
          d,
          p;
        if (
          (-1 !== e.inArray(e.typeOf(t), ['string', 'node']) && (t = { browse_button: t }),
          (d = i.get(t.browse_button)),
          !d)
        )
          throw new r.DOMException(r.DOMException.NOT_FOUND_ERR);
        (p = {
          accept: [{ title: s.translate('All Files'), extensions: '*' }],
          name: 'file',
          multiple: !1,
          required_caps: !1,
          container: d.parentNode || document.body,
        }),
          (t = e.extend({}, p, t)),
          'string' == typeof t.required_caps && (t.required_caps = a.parseCaps(t.required_caps)),
          'string' == typeof t.accept && (t.accept = n.mimes2extList(t.accept)),
          (c = i.get(t.container)),
          c || (c = document.body),
          'static' === i.getStyle(c, 'position') && (c.style.position = 'relative'),
          (c = d = null),
          u.call(o),
          e.extend(o, {
            uid: e.guid('uid_'),
            ruid: null,
            shimid: null,
            files: null,
            init: function () {
              o.bind('RuntimeInit', function (n, r) {
                (o.ruid = r.uid),
                  (o.shimid = r.shimid),
                  o.bind(
                    'Ready',
                    function () {
                      o.trigger('Refresh');
                    },
                    999,
                  ),
                  o.bind('Refresh', function () {
                    var n, o, s, a, u;
                    (s = i.get(t.browse_button)),
                      (a = i.get(r.shimid)),
                      s &&
                        ((n = i.getPos(s, i.get(t.container))),
                        (o = i.getSize(s)),
                        (u = parseInt(i.getStyle(s, 'z-index'), 10) || 0),
                        a &&
                          e.extend(a.style, {
                            top: n.y + 'px',
                            left: n.x + 'px',
                            width: o.w + 'px',
                            height: o.h + 'px',
                            zIndex: u + 1,
                          })),
                      (a = s = null);
                  }),
                  r.exec.call(o, 'FileInput', 'init', t);
              }),
                o.connectRuntime(e.extend({}, t, { required_caps: { select_file: !0 } }));
            },
            disable: function (t) {
              var n = this.getRuntime();
              n && n.exec.call(this, 'FileInput', 'disable', 'undefined' === e.typeOf(t) ? !0 : t);
            },
            refresh: function () {
              o.trigger('Refresh');
            },
            destroy: function () {
              var t = this.getRuntime();
              t && (t.exec.call(this, 'FileInput', 'destroy'), this.disconnectRuntime()),
                'array' === e.typeOf(this.files) &&
                  e.each(this.files, function (e) {
                    e.destroy();
                  }),
                (this.files = null),
                this.unbindAll();
            },
          }),
          this.handleEventProps(l);
      }
      var l = ['ready', 'change', 'cancel', 'mouseenter', 'mouseleave', 'mousedown', 'mouseup'];
      return (c.prototype = o.instance), c;
    }),
    i(y, [], function () {
      var e = function (e) {
          return unescape(encodeURIComponent(e));
        },
        t = function (e) {
          return decodeURIComponent(escape(e));
        },
        n = function (e, n) {
          if ('function' == typeof window.atob) return n ? t(window.atob(e)) : window.atob(e);
          var i = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
            r,
            o,
            s,
            a,
            u,
            c,
            l,
            d,
            p = 0,
            f = 0,
            h = '',
            m = [];
          if (!e) return e;
          e += '';
          do
            (a = i.indexOf(e.charAt(p++))),
              (u = i.indexOf(e.charAt(p++))),
              (c = i.indexOf(e.charAt(p++))),
              (l = i.indexOf(e.charAt(p++))),
              (d = (a << 18) | (u << 12) | (c << 6) | l),
              (r = (d >> 16) & 255),
              (o = (d >> 8) & 255),
              (s = 255 & d),
              64 == c
                ? (m[f++] = String.fromCharCode(r))
                : 64 == l
                ? (m[f++] = String.fromCharCode(r, o))
                : (m[f++] = String.fromCharCode(r, o, s));
          while (p < e.length);
          return (h = m.join('')), n ? t(h) : h;
        },
        i = function (t, n) {
          if ((n && (t = e(t)), 'function' == typeof window.btoa)) return window.btoa(t);
          var i = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',
            r,
            o,
            s,
            a,
            u,
            c,
            l,
            d,
            p = 0,
            f = 0,
            h = '',
            m = [];
          if (!t) return t;
          do
            (r = t.charCodeAt(p++)),
              (o = t.charCodeAt(p++)),
              (s = t.charCodeAt(p++)),
              (d = (r << 16) | (o << 8) | s),
              (a = (d >> 18) & 63),
              (u = (d >> 12) & 63),
              (c = (d >> 6) & 63),
              (l = 63 & d),
              (m[f++] = i.charAt(a) + i.charAt(u) + i.charAt(c) + i.charAt(l));
          while (p < t.length);
          h = m.join('');
          var g = t.length % 3;
          return (g ? h.slice(0, g - 3) : h) + '==='.slice(g || 3);
        };
      return { utf8_encode: e, utf8_decode: t, atob: n, btoa: i };
    }),
    i(w, [u, y, g], function (e, t, n) {
      function i(o, s) {
        function a(t, n, o) {
          var s,
            a = r[this.uid];
          return 'string' === e.typeOf(a) && a.length
            ? ((s = new i(null, { type: o, size: n - t })), s.detach(a.substr(t, s.size)), s)
            : null;
        }
        n.call(this),
          o && this.connectRuntime(o),
          s ? 'string' === e.typeOf(s) && (s = { data: s }) : (s = {}),
          e.extend(this, {
            uid: s.uid || e.guid('uid_'),
            ruid: o,
            size: s.size || 0,
            type: s.type || '',
            slice: function (e, t, n) {
              return this.isDetached()
                ? a.apply(this, arguments)
                : this.getRuntime().exec.call(this, 'Blob', 'slice', this.getSource(), e, t, n);
            },
            getSource: function () {
              return r[this.uid] ? r[this.uid] : null;
            },
            detach: function (e) {
              if (
                (this.ruid &&
                  (this.getRuntime().exec.call(this, 'Blob', 'destroy'), this.disconnectRuntime(), (this.ruid = null)),
                (e = e || ''),
                'data:' == e.substr(0, 5))
              ) {
                var n = e.indexOf(';base64,');
                (this.type = e.substring(5, n)), (e = t.atob(e.substring(n + 8)));
              }
              (this.size = e.length), (r[this.uid] = e);
            },
            isDetached: function () {
              return !this.ruid && 'string' === e.typeOf(r[this.uid]);
            },
            destroy: function () {
              this.detach(), delete r[this.uid];
            },
          }),
          s.data ? this.detach(s.data) : (r[this.uid] = s);
      }
      var r = {};
      return i;
    }),
    i(E, [u, d, w], function (e, t, n) {
      function i(i, r) {
        r || (r = {}), n.apply(this, arguments), this.type || (this.type = t.getFileMime(r.name));
        var o;
        if (r.name) (o = r.name.replace(/\\/g, '/')), (o = o.substr(o.lastIndexOf('/') + 1));
        else if (this.type) {
          var s = this.type.split('/')[0];
          (o = e.guid(('' !== s ? s : 'file') + '_')),
            t.extensions[this.type] && (o += '.' + t.extensions[this.type][0]);
        }
        e.extend(this, {
          name: o || e.guid('file_'),
          relativePath: '',
          lastModifiedDate: r.lastModifiedDate || new Date().toLocaleString(),
        });
      }
      return (i.prototype = n.prototype), i;
    }),
    i(_, [l, p, f, u, c, E, g, h, d], function (e, t, n, i, r, o, s, a, u) {
      function c(n) {
        var r = this,
          o;
        'string' == typeof n && (n = { drop_zone: n }),
          (o = {
            accept: [{ title: e.translate('All Files'), extensions: '*' }],
            required_caps: { drag_and_drop: !0 },
          }),
          (n = 'object' == typeof n ? i.extend({}, o, n) : o),
          (n.container = t.get(n.drop_zone) || document.body),
          'static' === t.getStyle(n.container, 'position') && (n.container.style.position = 'relative'),
          'string' == typeof n.accept && (n.accept = u.mimes2extList(n.accept)),
          s.call(r),
          i.extend(r, {
            uid: i.guid('uid_'),
            ruid: null,
            files: null,
            init: function () {
              r.bind('RuntimeInit', function (e, t) {
                (r.ruid = t.uid), t.exec.call(r, 'FileDrop', 'init', n), r.dispatchEvent('ready');
              }),
                r.connectRuntime(n);
            },
            destroy: function () {
              var e = this.getRuntime();
              e && (e.exec.call(this, 'FileDrop', 'destroy'), this.disconnectRuntime()),
                (this.files = null),
                this.unbindAll();
            },
          }),
          this.handleEventProps(l);
      }
      var l = ['ready', 'dragenter', 'dragleave', 'drop', 'error'];
      return (c.prototype = a.instance), c;
    }),
    i(b, [u, y, f, h, w, g], function (e, t, n, i, r, o) {
      function s() {
        function i(e, i) {
          var o = this;
          if ((this.trigger('loadstart'), this.readyState === s.LOADING))
            return (
              this.trigger('error', new n.DOMException(n.DOMException.INVALID_STATE_ERR)), void this.trigger('loadend')
            );
          if (!(i instanceof r))
            return (
              this.trigger('error', new n.DOMException(n.DOMException.NOT_FOUND_ERR)), void this.trigger('loadend')
            );
          if (((this.result = null), (this.readyState = s.LOADING), i.isDetached())) {
            var a = i.getSource();
            switch (e) {
              case 'readAsText':
              case 'readAsBinaryString':
                this.result = a;
                break;
              case 'readAsDataURL':
                this.result = 'data:' + i.type + ';base64,' + t.btoa(a);
            }
            (this.readyState = s.DONE), this.trigger('load'), this.trigger('loadend');
          } else this.connectRuntime(i.ruid), this.exec('FileReader', 'read', e, i);
        }
        o.call(this),
          e.extend(this, {
            uid: e.guid('uid_'),
            readyState: s.EMPTY,
            result: null,
            error: null,
            readAsBinaryString: function (e) {
              i.call(this, 'readAsBinaryString', e);
            },
            readAsDataURL: function (e) {
              i.call(this, 'readAsDataURL', e);
            },
            readAsText: function (e) {
              i.call(this, 'readAsText', e);
            },
            abort: function () {
              (this.result = null),
                -1 === e.inArray(this.readyState, [s.EMPTY, s.DONE]) &&
                  (this.readyState === s.LOADING && (this.readyState = s.DONE),
                  this.exec('FileReader', 'abort'),
                  this.trigger('abort'),
                  this.trigger('loadend'));
            },
            destroy: function () {
              this.abort(), this.exec('FileReader', 'destroy'), this.disconnectRuntime(), this.unbindAll();
            },
          }),
          this.handleEventProps(a),
          this.bind(
            'Error',
            function (e, t) {
              (this.readyState = s.DONE), (this.error = t);
            },
            999,
          ),
          this.bind(
            'Load',
            function (e) {
              this.readyState = s.DONE;
            },
            999,
          );
      }
      var a = ['loadstart', 'progress', 'load', 'abort', 'error', 'loadend'];
      return (s.EMPTY = 0), (s.LOADING = 1), (s.DONE = 2), (s.prototype = i.instance), s;
    }),
    i(x, [], function () {
      var e = function (t, n) {
          for (
            var i = [
                'source',
                'scheme',
                'authority',
                'userInfo',
                'user',
                'pass',
                'host',
                'port',
                'relative',
                'path',
                'directory',
                'file',
                'query',
                'fragment',
              ],
              r = i.length,
              o = { http: 80, https: 443 },
              s = {},
              a =
                /^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,
              u = a.exec(t || '');
            r--;

          )
            u[r] && (s[i[r]] = u[r]);
          if (!s.scheme) {
            (n && 'string' != typeof n) || (n = e(n || document.location.href)),
              (s.scheme = n.scheme),
              (s.host = n.host),
              (s.port = n.port);
            var c = '';
            /^[^\/]/.test(s.path) &&
              ((c = n.path), (c = /\/[^\/]*\.[^\/]*$/.test(c) ? c.replace(/\/[^\/]+$/, '/') : c.replace(/\/?$/, '/'))),
              (s.path = c + (s.path || ''));
          }
          return (
            s.port || (s.port = o[s.scheme] || 80),
            (s.port = parseInt(s.port, 10)),
            s.path || (s.path = '/'),
            delete s.source,
            s
          );
        },
        t = function (t) {
          var n = { http: 80, https: 443 },
            i = 'object' == typeof t ? t : e(t);
          return (
            i.scheme + '://' + i.host + (i.port !== n[i.scheme] ? ':' + i.port : '') + i.path + (i.query ? i.query : '')
          );
        },
        n = function (t) {
          function n(e) {
            return [e.scheme, e.host, e.port].join('/');
          }
          return 'string' == typeof t && (t = e(t)), n(e()) === n(t);
        };
      return { parseUrl: e, resolveUrl: t, hasSameOrigin: n };
    }),
    i(R, [u, g, h], function (e, t, n) {
      function i() {
        (this.uid = e.guid('uid_')),
          t.call(this),
          (this.destroy = function () {
            this.disconnectRuntime(), this.unbindAll();
          });
      }
      return (i.prototype = n.instance), i;
    }),
    i(A, [u, g, y], function (e, t, n) {
      return function () {
        function i(e, t) {
          if (!t.isDetached()) {
            var i = this.connectRuntime(t.ruid).exec.call(this, 'FileReaderSync', 'read', e, t);
            return this.disconnectRuntime(), i;
          }
          var r = t.getSource();
          switch (e) {
            case 'readAsBinaryString':
              return r;
            case 'readAsDataURL':
              return 'data:' + t.type + ';base64,' + n.btoa(r);
            case 'readAsText':
              for (var o = '', s = 0, a = r.length; a > s; s++) o += String.fromCharCode(r[s]);
              return o;
          }
        }
        t.call(this),
          e.extend(this, {
            uid: e.guid('uid_'),
            readAsBinaryString: function (e) {
              return i.call(this, 'readAsBinaryString', e);
            },
            readAsDataURL: function (e) {
              return i.call(this, 'readAsDataURL', e);
            },
            readAsText: function (e) {
              return i.call(this, 'readAsText', e);
            },
          });
      };
    }),
    i(O, [f, u, w], function (e, t, n) {
      function i() {
        var e,
          i = [];
        t.extend(this, {
          append: function (r, o) {
            var s = this,
              a = t.typeOf(o);
            o instanceof n
              ? (e = { name: r, value: o })
              : 'array' === a
              ? ((r += '[]'),
                t.each(o, function (e) {
                  s.append(r, e);
                }))
              : 'object' === a
              ? t.each(o, function (e, t) {
                  s.append(r + '[' + t + ']', e);
                })
              : 'null' === a || 'undefined' === a || ('number' === a && isNaN(o))
              ? s.append(r, 'false')
              : i.push({ name: r, value: o.toString() });
          },
          hasBlob: function () {
            return !!this.getBlob();
          },
          getBlob: function () {
            return (e && e.value) || null;
          },
          getBlobName: function () {
            return (e && e.name) || null;
          },
          each: function (n) {
            t.each(i, function (e) {
              n(e.value, e.name);
            }),
              e && n(e.value, e.name);
          },
          destroy: function () {
            (e = null), (i = []);
          },
        });
      }
      return i;
    }),
    i(T, [u, f, h, y, x, m, R, w, A, O, c, d], function (e, t, n, i, r, o, s, a, u, c, l, d) {
      function p() {
        this.uid = e.guid('uid_');
      }
      function f() {
        function n(e, t) {
          return y.hasOwnProperty(e)
            ? 1 === arguments.length
              ? l.can('define_property')
                ? y[e]
                : v[e]
              : void (l.can('define_property') ? (y[e] = t) : (v[e] = t))
            : void 0;
        }
        function u(t) {
          function i() {
            q && (q.destroy(), (q = null)), a.dispatchEvent('loadend'), (a = null);
          }
          function r(r) {
            q.bind('LoadStart', function (e) {
              n('readyState', f.LOADING),
                a.dispatchEvent('readystatechange'),
                a.dispatchEvent(e),
                C && a.upload.dispatchEvent(e);
            }),
              q.bind('Progress', function (e) {
                n('readyState') !== f.LOADING && (n('readyState', f.LOADING), a.dispatchEvent('readystatechange')),
                  a.dispatchEvent(e);
              }),
              q.bind('UploadProgress', function (e) {
                C &&
                  a.upload.dispatchEvent({ type: 'progress', lengthComputable: !1, total: e.total, loaded: e.loaded });
              }),
              q.bind('Load', function (t) {
                n('readyState', f.DONE),
                  n('status', Number(r.exec.call(q, 'XMLHttpRequest', 'getStatus') || 0)),
                  n('statusText', h[n('status')] || ''),
                  n('response', r.exec.call(q, 'XMLHttpRequest', 'getResponse', n('responseType'))),
                  ~e.inArray(n('responseType'), ['text', ''])
                    ? n('responseText', n('response'))
                    : 'document' === n('responseType') && n('responseXML', n('response')),
                  (U = r.exec.call(q, 'XMLHttpRequest', 'getAllResponseHeaders')),
                  a.dispatchEvent('readystatechange'),
                  n('status') > 0
                    ? (C && a.upload.dispatchEvent(t), a.dispatchEvent(t))
                    : ((D = !0), a.dispatchEvent('error')),
                  i();
              }),
              q.bind('Abort', function (e) {
                a.dispatchEvent(e), i();
              }),
              q.bind('Error', function (e) {
                (D = !0),
                  n('readyState', f.DONE),
                  a.dispatchEvent('readystatechange'),
                  (N = !0),
                  a.dispatchEvent(e),
                  i();
              }),
              r.exec.call(
                q,
                'XMLHttpRequest',
                'send',
                {
                  url: E,
                  method: _,
                  async: w,
                  user: x,
                  password: R,
                  headers: b,
                  mimeType: O,
                  encoding: A,
                  responseType: a.responseType,
                  withCredentials: a.withCredentials,
                  options: P,
                },
                t,
              );
          }
          var a = this;
          (L = new Date().getTime()),
            (q = new s()),
            'string' == typeof P.required_caps && (P.required_caps = o.parseCaps(P.required_caps)),
            (P.required_caps = e.extend({}, P.required_caps, { return_response_type: a.responseType })),
            t instanceof c && (P.required_caps.send_multipart = !0),
            e.isEmptyObj(b) || (P.required_caps.send_custom_headers = !0),
            I || (P.required_caps.do_cors = !0),
            P.ruid
              ? r(q.connectRuntime(P))
              : (q.bind('RuntimeInit', function (e, t) {
                  r(t);
                }),
                q.bind('RuntimeError', function (e, t) {
                  a.dispatchEvent('RuntimeError', t);
                }),
                q.connectRuntime(P));
        }
        function g() {
          n('responseText', ''),
            n('responseXML', null),
            n('response', null),
            n('status', 0),
            n('statusText', ''),
            (L = M = null);
        }
        var v = this,
          y = {
            timeout: 0,
            readyState: f.UNSENT,
            withCredentials: !1,
            status: 0,
            statusText: '',
            responseType: '',
            responseXML: null,
            responseText: null,
            response: null,
          },
          w = !0,
          E,
          _,
          b = {},
          x,
          R,
          A = null,
          O = null,
          T = !1,
          S = !1,
          C = !1,
          N = !1,
          D = !1,
          I = !1,
          L,
          M,
          F = null,
          k = null,
          P = {},
          q,
          U = '',
          B;
        e.extend(this, y, {
          uid: e.guid('uid_'),
          upload: new p(),
          open: function (o, s, a, u, c) {
            var l;
            if (!o || !s) throw new t.DOMException(t.DOMException.SYNTAX_ERR);
            if (/[\u0100-\uffff]/.test(o) || i.utf8_encode(o) !== o)
              throw new t.DOMException(t.DOMException.SYNTAX_ERR);
            if (
              (~e.inArray(o.toUpperCase(), [
                'CONNECT',
                'DELETE',
                'GET',
                'HEAD',
                'OPTIONS',
                'POST',
                'PUT',
                'TRACE',
                'TRACK',
              ]) && (_ = o.toUpperCase()),
              ~e.inArray(_, ['CONNECT', 'TRACE', 'TRACK']))
            )
              throw new t.DOMException(t.DOMException.SECURITY_ERR);
            if (
              ((s = i.utf8_encode(s)),
              (l = r.parseUrl(s)),
              (I = r.hasSameOrigin(l)),
              (E = r.resolveUrl(s)),
              (u || c) && !I)
            )
              throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);
            if (
              ((x = u || l.user),
              (R = c || l.pass),
              (w = a || !0),
              w === !1 && (n('timeout') || n('withCredentials') || '' !== n('responseType')))
            )
              throw new t.DOMException(t.DOMException.INVALID_ACCESS_ERR);
            (T = !w),
              (S = !1),
              (b = {}),
              g.call(this),
              n('readyState', f.OPENED),
              this.dispatchEvent('readystatechange');
          },
          setRequestHeader: function (r, o) {
            var s = [
              'accept-charset',
              'accept-encoding',
              'access-control-request-headers',
              'access-control-request-method',
              'connection',
              'content-length',
              'cookie',
              'cookie2',
              'content-transfer-encoding',
              'date',
              'expect',
              'host',
              'keep-alive',
              'origin',
              'referer',
              'te',
              'trailer',
              'transfer-encoding',
              'upgrade',
              'user-agent',
              'via',
            ];
            if (n('readyState') !== f.OPENED || S) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
            if (/[\u0100-\uffff]/.test(r) || i.utf8_encode(r) !== r)
              throw new t.DOMException(t.DOMException.SYNTAX_ERR);
            return (
              (r = e.trim(r).toLowerCase()),
              ~e.inArray(r, s) || /^(proxy\-|sec\-)/.test(r) ? !1 : (b[r] ? (b[r] += ', ' + o) : (b[r] = o), !0)
            );
          },
          getAllResponseHeaders: function () {
            return U || '';
          },
          getResponseHeader: function (t) {
            return (
              (t = t.toLowerCase()),
              D || ~e.inArray(t, ['set-cookie', 'set-cookie2'])
                ? null
                : U &&
                  '' !== U &&
                  (B ||
                    ((B = {}),
                    e.each(U.split(/\r\n/), function (t) {
                      var n = t.split(/:\s+/);
                      2 === n.length &&
                        ((n[0] = e.trim(n[0])), (B[n[0].toLowerCase()] = { header: n[0], value: e.trim(n[1]) }));
                    })),
                  B.hasOwnProperty(t))
                ? B[t].header + ': ' + B[t].value
                : null
            );
          },
          overrideMimeType: function (i) {
            var r, o;
            if (~e.inArray(n('readyState'), [f.LOADING, f.DONE]))
              throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
            if (
              ((i = e.trim(i.toLowerCase())),
              /;/.test(i) && (r = i.match(/^([^;]+)(?:;\scharset\=)?(.*)$/)) && ((i = r[1]), r[2] && (o = r[2])),
              !d.mimes[i])
            )
              throw new t.DOMException(t.DOMException.SYNTAX_ERR);
            (F = i), (k = o);
          },
          send: function (n, r) {
            if (((P = 'string' === e.typeOf(r) ? { ruid: r } : r ? r : {}), this.readyState !== f.OPENED || S))
              throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
            if (n instanceof a) (P.ruid = n.ruid), (O = n.type || 'application/octet-stream');
            else if (n instanceof c) {
              if (n.hasBlob()) {
                var o = n.getBlob();
                (P.ruid = o.ruid), (O = o.type || 'application/octet-stream');
              }
            } else 'string' == typeof n && ((A = 'UTF-8'), (O = 'text/plain;charset=UTF-8'), (n = i.utf8_encode(n)));
            this.withCredentials ||
              (this.withCredentials = P.required_caps && P.required_caps.send_browser_cookies && !I),
              (C = !T && this.upload.hasEventListener()),
              (D = !1),
              (N = !n),
              T || (S = !0),
              u.call(this, n);
          },
          abort: function () {
            if (((D = !0), (T = !1), ~e.inArray(n('readyState'), [f.UNSENT, f.OPENED, f.DONE])))
              n('readyState', f.UNSENT);
            else {
              if ((n('readyState', f.DONE), (S = !1), !q)) throw new t.DOMException(t.DOMException.INVALID_STATE_ERR);
              q.getRuntime().exec.call(q, 'XMLHttpRequest', 'abort', N), (N = !0);
            }
          },
          destroy: function () {
            q && ('function' === e.typeOf(q.destroy) && q.destroy(), (q = null)),
              this.unbindAll(),
              this.upload && (this.upload.unbindAll(), (this.upload = null));
          },
        }),
          this.handleEventProps(m.concat(['readystatechange'])),
          this.upload.handleEventProps(m);
      }
      var h = {
        100: 'Continue',
        101: 'Switching Protocols',
        102: 'Processing',
        200: 'OK',
        201: 'Created',
        202: 'Accepted',
        203: 'Non-Authoritative Information',
        204: 'No Content',
        205: 'Reset Content',
        206: 'Partial Content',
        207: 'Multi-Status',
        226: 'IM Used',
        300: 'Multiple Choices',
        301: 'Moved Permanently',
        302: 'Found',
        303: 'See Other',
        304: 'Not Modified',
        305: 'Use Proxy',
        306: 'Reserved',
        307: 'Temporary Redirect',
        400: 'Bad Request',
        401: 'Unauthorized',
        402: 'Payment Required',
        403: 'Forbidden',
        404: 'Not Found',
        405: 'Method Not Allowed',
        406: 'Not Acceptable',
        407: 'Proxy Authentication Required',
        408: 'Request Timeout',
        409: 'Conflict',
        410: 'Gone',
        411: 'Length Required',
        412: 'Precondition Failed',
        413: 'Request Entity Too Large',
        414: 'Request-URI Too Long',
        415: 'Unsupported Media Type',
        416: 'Requested Range Not Satisfiable',
        417: 'Expectation Failed',
        422: 'Unprocessable Entity',
        423: 'Locked',
        424: 'Failed Dependency',
        426: 'Upgrade Required',
        500: 'Internal Server Error',
        501: 'Not Implemented',
        502: 'Bad Gateway',
        503: 'Service Unavailable',
        504: 'Gateway Timeout',
        505: 'HTTP Version Not Supported',
        506: 'Variant Also Negotiates',
        507: 'Insufficient Storage',
        510: 'Not Extended',
      };
      p.prototype = n.instance;
      var m = ['loadstart', 'progress', 'abort', 'error', 'load', 'timeout', 'loadend'],
        g = 1,
        v = 2;
      return (
        (f.UNSENT = 0),
        (f.OPENED = 1),
        (f.HEADERS_RECEIVED = 2),
        (f.LOADING = 3),
        (f.DONE = 4),
        (f.prototype = n.instance),
        f
      );
    }),
    i(S, [u, f, m, c], function (e, t, n, i) {
      function r(t) {
        var r = this,
          a = n.capTest,
          u = n.capTrue,
          c = e.extend(
            {
              access_binary: a(window.FileReader || (window.File && window.File.getAsDataURL)),
              access_image_binary: function () {
                return r.can('access_binary') && !!s.Image;
              },
              display_media: a(i.can('create_canvas') || i.can('use_data_uri_over32kb')),
              do_cors: a(window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()),
              drag_and_drop: a(
                (function () {
                  var e = document.createElement('div');
                  return (
                    ('draggable' in e || ('ondragstart' in e && 'ondrop' in e)) &&
                    ('IE' !== i.browser || i.verComp(i.version, 9, '>'))
                  );
                })(),
              ),
              filter_by_extension: a(
                (function () {
                  return !(
                    ('Chrome' === i.browser && i.verComp(i.version, 28, '<')) ||
                    ('IE' === i.browser && i.verComp(i.version, 10, '<')) ||
                    ('Safari' === i.browser && i.verComp(i.version, 7, '<')) ||
                    ('Firefox' === i.browser && i.verComp(i.version, 37, '<'))
                  );
                })(),
              ),
              return_response_headers: u,
              return_response_type: function (e) {
                return 'json' === e && window.JSON ? !0 : i.can('return_response_type', e);
              },
              return_status_code: u,
              report_upload_progress: a(window.XMLHttpRequest && new XMLHttpRequest().upload),
              resize_image: function () {
                return r.can('access_binary') && i.can('create_canvas');
              },
              select_file: function () {
                return i.can('use_fileinput') && window.File;
              },
              select_folder: function () {
                return r.can('select_file') && 'Chrome' === i.browser && i.verComp(i.version, 21, '>=');
              },
              select_multiple: function () {
                return (
                  r.can('select_file') &&
                  !('Safari' === i.browser && 'Windows' === i.os) &&
                  !('iOS' === i.os && i.verComp(i.osVersion, '7.0.0', '>') && i.verComp(i.osVersion, '8.0.0', '<'))
                );
              },
              send_binary_string: a(
                window.XMLHttpRequest &&
                  (new XMLHttpRequest().sendAsBinary || (window.Uint8Array && window.ArrayBuffer)),
              ),
              send_custom_headers: a(window.XMLHttpRequest),
              send_multipart: function () {
                return (
                  !!(window.XMLHttpRequest && new XMLHttpRequest().upload && window.FormData) ||
                  r.can('send_binary_string')
                );
              },
              slice_blob: a(
                window.File && (File.prototype.mozSlice || File.prototype.webkitSlice || File.prototype.slice),
              ),
              stream_upload: function () {
                return r.can('slice_blob') && r.can('send_multipart');
              },
              summon_file_dialog: function () {
                return (
                  r.can('select_file') &&
                  (('Firefox' === i.browser && i.verComp(i.version, 4, '>=')) ||
                    ('Opera' === i.browser && i.verComp(i.version, 12, '>=')) ||
                    ('IE' === i.browser && i.verComp(i.version, 10, '>=')) ||
                    !!~e.inArray(i.browser, ['Chrome', 'Safari']))
                );
              },
              upload_filesize: u,
            },
            arguments[2],
          );
        n.call(this, t, arguments[1] || o, c),
          e.extend(this, {
            init: function () {
              this.trigger('Init');
            },
            destroy: (function (e) {
              return function () {
                e.call(r), (e = r = null);
              };
            })(this.destroy),
          }),
          e.extend(this.getShim(), s);
      }
      var o = 'html5',
        s = {};
      return n.addConstructor(o, r), s;
    }),
    i(C, [u], function (e) {
      function t() {
        this.returnValue = !1;
      }
      function n() {
        this.cancelBubble = !0;
      }
      var i = {},
        r = 'moxie_' + e.guid(),
        o = function (o, s, a, u) {
          var c, l;
          (s = s.toLowerCase()),
            o.addEventListener
              ? ((c = a), o.addEventListener(s, c, !1))
              : o.attachEvent &&
                ((c = function () {
                  var e = window.event;
                  e.target || (e.target = e.srcElement), (e.preventDefault = t), (e.stopPropagation = n), a(e);
                }),
                o.attachEvent('on' + s, c)),
            o[r] || (o[r] = e.guid()),
            i.hasOwnProperty(o[r]) || (i[o[r]] = {}),
            (l = i[o[r]]),
            l.hasOwnProperty(s) || (l[s] = []),
            l[s].push({ func: c, orig: a, key: u });
        },
        s = function (t, n, o) {
          var s, a;
          if (((n = n.toLowerCase()), t[r] && i[t[r]] && i[t[r]][n])) {
            s = i[t[r]][n];
            for (
              var u = s.length - 1;
              u >= 0 &&
              ((s[u].orig !== o && s[u].key !== o) ||
                (t.removeEventListener
                  ? t.removeEventListener(n, s[u].func, !1)
                  : t.detachEvent && t.detachEvent('on' + n, s[u].func),
                (s[u].orig = null),
                (s[u].func = null),
                s.splice(u, 1),
                o === a));
              u--
            );
            if ((s.length || delete i[t[r]][n], e.isEmptyObj(i[t[r]]))) {
              delete i[t[r]];
              try {
                delete t[r];
              } catch (c) {
                t[r] = a;
              }
            }
          }
        },
        a = function (t, n) {
          t &&
            t[r] &&
            e.each(i[t[r]], function (e, i) {
              s(t, i, n);
            });
        };
      return { addEvent: o, removeEvent: s, removeAllEvents: a };
    }),
    i(N, [S, E, u, p, C, d, c], function (e, t, n, i, r, o, s) {
      function a() {
        var e, a;
        n.extend(this, {
          init: function (u) {
            var c = this,
              l = c.getRuntime(),
              d,
              p,
              f,
              h,
              m,
              g;
            (e = u),
              (f = e.accept.mimes || o.extList2mimes(e.accept, l.can('filter_by_extension'))),
              (p = l.getShimContainer()),
              (p.innerHTML =
                '<input id="' +
                l.uid +
                '" type="file" style="font-size:999px;opacity:0;"' +
                (e.multiple && l.can('select_multiple') ? 'multiple' : '') +
                (e.directory && l.can('select_folder') ? 'webkitdirectory directory' : '') +
                (f ? ' accept="' + f.join(',') + '"' : '') +
                ' />'),
              (d = i.get(l.uid)),
              n.extend(d.style, { position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }),
              (h = i.get(e.browse_button)),
              (a = i.getStyle(h, 'z-index') || 'auto'),
              l.can('summon_file_dialog') &&
                ('static' === i.getStyle(h, 'position') && (h.style.position = 'relative'),
                r.addEvent(
                  h,
                  'click',
                  function (e) {
                    var t = i.get(l.uid);
                    t && !t.disabled && t.click(), e.preventDefault();
                  },
                  c.uid,
                ),
                c.bind('Refresh', function () {
                  (m = parseInt(a, 10) || 1),
                    (i.get(e.browse_button).style.zIndex = m),
                    (this.getRuntime().getShimContainer().style.zIndex = m - 1);
                })),
              (g = l.can('summon_file_dialog') ? h : p),
              r.addEvent(
                g,
                'mouseover',
                function () {
                  c.trigger('mouseenter');
                },
                c.uid,
              ),
              r.addEvent(
                g,
                'mouseout',
                function () {
                  c.trigger('mouseleave');
                },
                c.uid,
              ),
              r.addEvent(
                g,
                'mousedown',
                function () {
                  c.trigger('mousedown');
                },
                c.uid,
              ),
              r.addEvent(
                i.get(e.container),
                'mouseup',
                function () {
                  c.trigger('mouseup');
                },
                c.uid,
              ),
              (d.onchange = function v(i) {
                if (
                  ((c.files = []),
                  n.each(this.files, function (n) {
                    var i = '';
                    return e.directory && '.' == n.name
                      ? !0
                      : (n.webkitRelativePath && (i = '/' + n.webkitRelativePath.replace(/^\//, '')),
                        (n = new t(l.uid, n)),
                        (n.relativePath = i),
                        void c.files.push(n));
                  }),
                  'IE' !== s.browser && 'IEMobile' !== s.browser)
                )
                  this.value = '';
                else {
                  var r = this.cloneNode(!0);
                  this.parentNode.replaceChild(r, this), (r.onchange = v);
                }
                c.files.length && c.trigger('change');
              }),
              c.trigger({ type: 'ready', async: !0 }),
              (p = null);
          },
          disable: function (e) {
            var t = this.getRuntime(),
              n;
            (n = i.get(t.uid)) && (n.disabled = !!e);
          },
          destroy: function () {
            var t = this.getRuntime(),
              n = t.getShim(),
              o = t.getShimContainer(),
              s = e && i.get(e.container),
              u = e && i.get(e.browse_button);
            s && r.removeAllEvents(s, this.uid),
              u && (r.removeAllEvents(u, this.uid), (u.style.zIndex = a)),
              o && (r.removeAllEvents(o, this.uid), (o.innerHTML = '')),
              n.removeInstance(this.uid),
              (e = o = s = u = n = null);
          },
        });
      }
      return (e.FileInput = a);
    }),
    i(D, [S, w], function (e, t) {
      function n() {
        function e(e, t, n) {
          var i;
          if (!window.File.prototype.slice)
            return (i = window.File.prototype.webkitSlice || window.File.prototype.mozSlice) ? i.call(e, t, n) : null;
          try {
            return e.slice(), e.slice(t, n);
          } catch (r) {
            return e.slice(t, n - t);
          }
        }
        this.slice = function () {
          return new t(this.getRuntime().uid, e.apply(this, arguments));
        };
      }
      return (e.Blob = n);
    }),
    i(I, [S, E, u, p, C, d], function (e, t, n, i, r, o) {
      function s() {
        function e(e) {
          if (!e.dataTransfer || !e.dataTransfer.types) return !1;
          var t = n.toArray(e.dataTransfer.types || []);
          return (
            -1 !== n.inArray('Files', t) ||
            -1 !== n.inArray('public.file-url', t) ||
            -1 !== n.inArray('application/x-moz-file', t)
          );
        }
        function s(e, n) {
          if (u(e)) {
            var i = new t(g, e);
            (i.relativePath = n || ''), f.push(i);
          }
        }
        function a(e) {
          for (var t = [], i = 0; i < e.length; i++) [].push.apply(t, e[i].extensions.split(/\s*,\s*/));
          return -1 === n.inArray('*', t) ? t : [];
        }
        function u(e) {
          if (!h.length) return !0;
          var t = o.getFileExtension(e.name);
          return !t || -1 !== n.inArray(t, h);
        }
        function c(e, t) {
          var i = [];
          n.each(e, function (e) {
            var t = e.webkitGetAsEntry();
            t && (t.isFile ? s(e.getAsFile(), t.fullPath) : i.push(t));
          }),
            i.length ? l(i, t) : t();
        }
        function l(e, t) {
          var i = [];
          n.each(e, function (e) {
            i.push(function (t) {
              d(e, t);
            });
          }),
            n.inSeries(i, function () {
              t();
            });
        }
        function d(e, t) {
          e.isFile
            ? e.file(
                function (n) {
                  s(n, e.fullPath), t();
                },
                function () {
                  t();
                },
              )
            : e.isDirectory
            ? p(e, t)
            : t();
        }
        function p(e, t) {
          function n(e) {
            r.readEntries(function (t) {
              t.length ? ([].push.apply(i, t), n(e)) : e();
            }, e);
          }
          var i = [],
            r = e.createReader();
          n(function () {
            l(i, t);
          });
        }
        var f = [],
          h = [],
          m,
          g;
        n.extend(this, {
          init: function (t) {
            var i = this,
              o;
            (m = t),
              (g = i.ruid),
              (h = a(m.accept)),
              (o = m.container),
              r.addEvent(
                o,
                'dragover',
                function (t) {
                  e(t) && (t.preventDefault(), (t.dataTransfer.dropEffect = 'copy'));
                },
                i.uid,
              ),
              r.addEvent(
                o,
                'drop',
                function (t) {
                  e(t) &&
                    (t.preventDefault(),
                    (f = []),
                    t.dataTransfer.items && t.dataTransfer.items[0].webkitGetAsEntry
                      ? c(t.dataTransfer.items, function () {
                          (i.files = f), i.trigger('drop');
                        })
                      : (n.each(t.dataTransfer.files, function (e) {
                          s(e);
                        }),
                        (i.files = f),
                        i.trigger('drop')));
                },
                i.uid,
              ),
              r.addEvent(
                o,
                'dragenter',
                function (e) {
                  i.trigger('dragenter');
                },
                i.uid,
              ),
              r.addEvent(
                o,
                'dragleave',
                function (e) {
                  i.trigger('dragleave');
                },
                i.uid,
              );
          },
          destroy: function () {
            r.removeAllEvents(m && i.get(m.container), this.uid), (g = f = h = m = null);
          },
        });
      }
      return (e.FileDrop = s);
    }),
    i(L, [S, y, u], function (e, t, n) {
      function i() {
        function e(e) {
          return t.atob(e.substring(e.indexOf('base64,') + 7));
        }
        var i,
          r = !1;
        n.extend(this, {
          read: function (t, o) {
            var s = this;
            (s.result = ''),
              (i = new window.FileReader()),
              i.addEventListener('progress', function (e) {
                s.trigger(e);
              }),
              i.addEventListener('load', function (t) {
                (s.result = r ? e(i.result) : i.result), s.trigger(t);
              }),
              i.addEventListener('error', function (e) {
                s.trigger(e, i.error);
              }),
              i.addEventListener('loadend', function (e) {
                (i = null), s.trigger(e);
              }),
              'function' === n.typeOf(i[t])
                ? ((r = !1), i[t](o.getSource()))
                : 'readAsBinaryString' === t && ((r = !0), i.readAsDataURL(o.getSource()));
          },
          abort: function () {
            i && i.abort();
          },
          destroy: function () {
            i = null;
          },
        });
      }
      return (e.FileReader = i);
    }),
    i(M, [S, u, d, x, E, w, O, f, c], function (e, t, n, i, r, o, s, a, u) {
      function c() {
        function e(e, t) {
          var n = this,
            i,
            r;
          (i = t.getBlob().getSource()),
            (r = new window.FileReader()),
            (r.onload = function () {
              t.append(t.getBlobName(), new o(null, { type: i.type, data: r.result })), p.send.call(n, e, t);
            }),
            r.readAsBinaryString(i);
        }
        function c() {
          return !window.XMLHttpRequest || ('IE' === u.browser && u.verComp(u.version, 8, '<'))
            ? (function () {
                for (var e = ['Msxml2.XMLHTTP.6.0', 'Microsoft.XMLHTTP'], t = 0; t < e.length; t++)
                  try {
                    return new ActiveXObject(e[t]);
                  } catch (n) {}
              })()
            : new window.XMLHttpRequest();
        }
        function l(e) {
          var t = e.responseXML,
            n = e.responseText;
          return (
            'IE' === u.browser &&
              n &&
              t &&
              !t.documentElement &&
              /[^\/]+\/[^\+]+\+xml/.test(e.getResponseHeader('Content-Type')) &&
              ((t = new window.ActiveXObject('Microsoft.XMLDOM')),
              (t.async = !1),
              (t.validateOnParse = !1),
              t.loadXML(n)),
            t &&
            (('IE' === u.browser && 0 !== t.parseError) ||
              !t.documentElement ||
              'parsererror' === t.documentElement.tagName)
              ? null
              : t
          );
        }
        function d(e) {
          var t = '----moxieboundary' + new Date().getTime(),
            n = '--',
            i = '\r\n',
            r = '',
            s = this.getRuntime();
          if (!s.can('send_binary_string')) throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);
          return (
            f.setRequestHeader('Content-Type', 'multipart/form-data; boundary=' + t),
            e.each(function (e, s) {
              r +=
                e instanceof o
                  ? n +
                    t +
                    i +
                    'Content-Disposition: form-data; name="' +
                    s +
                    '"; filename="' +
                    unescape(encodeURIComponent(e.name || 'blob')) +
                    '"' +
                    i +
                    'Content-Type: ' +
                    (e.type || 'application/octet-stream') +
                    i +
                    i +
                    e.getSource() +
                    i
                  : n +
                    t +
                    i +
                    'Content-Disposition: form-data; name="' +
                    s +
                    '"' +
                    i +
                    i +
                    unescape(encodeURIComponent(e)) +
                    i;
            }),
            (r += n + t + n + i)
          );
        }
        var p = this,
          f,
          h;
        t.extend(this, {
          send: function (n, r) {
            var a = this,
              l = 'Mozilla' === u.browser && u.verComp(u.version, 4, '>=') && u.verComp(u.version, 7, '<'),
              p = 'Android Browser' === u.browser,
              m = !1;
            if (
              ((h = n.url.replace(/^.+?\/([\w\-\.]+)$/, '$1').toLowerCase()),
              (f = c()),
              f.open(n.method, n.url, n.async, n.user, n.password),
              r instanceof o)
            )
              r.isDetached() && (m = !0), (r = r.getSource());
            else if (r instanceof s) {
              if (r.hasBlob())
                if (r.getBlob().isDetached()) (r = d.call(a, r)), (m = !0);
                else if ((l || p) && 'blob' === t.typeOf(r.getBlob().getSource()) && window.FileReader)
                  return void e.call(a, n, r);
              if (r instanceof s) {
                var g = new window.FormData();
                r.each(function (e, t) {
                  e instanceof o ? g.append(t, e.getSource()) : g.append(t, e);
                }),
                  (r = g);
              }
            }
            f.upload
              ? (n.withCredentials && (f.withCredentials = !0),
                f.addEventListener('load', function (e) {
                  a.trigger(e);
                }),
                f.addEventListener('error', function (e) {
                  a.trigger(e);
                }),
                f.addEventListener('progress', function (e) {
                  a.trigger(e);
                }),
                f.upload.addEventListener('progress', function (e) {
                  a.trigger({ type: 'UploadProgress', loaded: e.loaded, total: e.total });
                }))
              : (f.onreadystatechange = function v() {
                  switch (f.readyState) {
                    case 1:
                      break;
                    case 2:
                      break;
                    case 3:
                      var e, t;
                      try {
                        i.hasSameOrigin(n.url) && (e = f.getResponseHeader('Content-Length') || 0),
                          f.responseText && (t = f.responseText.length);
                      } catch (r) {
                        e = t = 0;
                      }
                      a.trigger({ type: 'progress', lengthComputable: !!e, total: parseInt(e, 10), loaded: t });
                      break;
                    case 4:
                      (f.onreadystatechange = function () {}), 0 === f.status ? a.trigger('error') : a.trigger('load');
                  }
                }),
              t.isEmptyObj(n.headers) ||
                t.each(n.headers, function (e, t) {
                  f.setRequestHeader(t, e);
                }),
              '' !== n.responseType &&
                'responseType' in f &&
                ('json' !== n.responseType || u.can('return_response_type', 'json')
                  ? (f.responseType = n.responseType)
                  : (f.responseType = 'text')),
              m
                ? f.sendAsBinary
                  ? f.sendAsBinary(r)
                  : !(function () {
                      for (var e = new Uint8Array(r.length), t = 0; t < r.length; t++) e[t] = 255 & r.charCodeAt(t);
                      f.send(e.buffer);
                    })()
                : f.send(r),
              a.trigger('loadstart');
          },
          getStatus: function () {
            try {
              if (f) return f.status;
            } catch (e) {}
            return 0;
          },
          getResponse: function (e) {
            var t = this.getRuntime();
            try {
              switch (e) {
                case 'blob':
                  var i = new r(t.uid, f.response),
                    o = f.getResponseHeader('Content-Disposition');
                  if (o) {
                    var s = o.match(/filename=([\'\"'])([^\1]+)\1/);
                    s && (h = s[2]);
                  }
                  return (i.name = h), i.type || (i.type = n.getFileMime(h)), i;
                case 'json':
                  return u.can('return_response_type', 'json')
                    ? f.response
                    : 200 === f.status && window.JSON
                    ? JSON.parse(f.responseText)
                    : null;
                case 'document':
                  return l(f);
                default:
                  return '' !== f.responseText ? f.responseText : null;
              }
            } catch (a) {
              return null;
            }
          },
          getAllResponseHeaders: function () {
            try {
              return f.getAllResponseHeaders();
            } catch (e) {}
            return '';
          },
          abort: function () {
            f && f.abort();
          },
          destroy: function () {
            p = h = null;
          },
        });
      }
      return (e.XMLHttpRequest = c);
    }),
    i(F, [u, f, m, c], function (e, t, n, i) {
      function r(t) {
        var r = this,
          a = n.capTest,
          u = n.capTrue;
        n.call(this, t, o, {
          access_binary: a(window.FileReader || (window.File && File.getAsDataURL)),
          access_image_binary: !1,
          display_media: a(s.Image && (i.can('create_canvas') || i.can('use_data_uri_over32kb'))),
          do_cors: !1,
          drag_and_drop: !1,
          filter_by_extension: a(
            (function () {
              return !(
                ('Chrome' === i.browser && i.verComp(i.version, 28, '<')) ||
                ('IE' === i.browser && i.verComp(i.version, 10, '<')) ||
                ('Safari' === i.browser && i.verComp(i.version, 7, '<')) ||
                ('Firefox' === i.browser && i.verComp(i.version, 37, '<'))
              );
            })(),
          ),
          resize_image: function () {
            return s.Image && r.can('access_binary') && i.can('create_canvas');
          },
          report_upload_progress: !1,
          return_response_headers: !1,
          return_response_type: function (t) {
            return 'json' === t && window.JSON ? !0 : !!~e.inArray(t, ['text', 'document', '']);
          },
          return_status_code: function (t) {
            return !e.arrayDiff(t, [200, 404]);
          },
          select_file: function () {
            return i.can('use_fileinput');
          },
          select_multiple: !1,
          send_binary_string: !1,
          send_custom_headers: !1,
          send_multipart: !0,
          slice_blob: !1,
          stream_upload: function () {
            return r.can('select_file');
          },
          summon_file_dialog: function () {
            return (
              r.can('select_file') &&
              (('Firefox' === i.browser && i.verComp(i.version, 4, '>=')) ||
                ('Opera' === i.browser && i.verComp(i.version, 12, '>=')) ||
                ('IE' === i.browser && i.verComp(i.version, 10, '>=')) ||
                !!~e.inArray(i.browser, ['Chrome', 'Safari']))
            );
          },
          upload_filesize: u,
          use_http_method: function (t) {
            return !e.arrayDiff(t, ['GET', 'POST']);
          },
        }),
          e.extend(this, {
            init: function () {
              this.trigger('Init');
            },
            destroy: (function (e) {
              return function () {
                e.call(r), (e = r = null);
              };
            })(this.destroy),
          }),
          e.extend(this.getShim(), s);
      }
      var o = 'html4',
        s = {};
      return n.addConstructor(o, r), s;
    }),
    i(k, [F, E, u, p, C, d, c], function (e, t, n, i, r, o, s) {
      function a() {
        function e() {
          var o = this,
            l = o.getRuntime(),
            d,
            p,
            f,
            h,
            m,
            g;
          (g = n.guid('uid_')),
            (d = l.getShimContainer()),
            a && ((f = i.get(a + '_form')), f && n.extend(f.style, { top: '100%' })),
            (h = document.createElement('form')),
            h.setAttribute('id', g + '_form'),
            h.setAttribute('method', 'post'),
            h.setAttribute('enctype', 'multipart/form-data'),
            h.setAttribute('encoding', 'multipart/form-data'),
            n.extend(h.style, {
              overflow: 'hidden',
              position: 'absolute',
              top: 0,
              left: 0,
              width: '100%',
              height: '100%',
            }),
            (m = document.createElement('input')),
            m.setAttribute('id', g),
            m.setAttribute('type', 'file'),
            m.setAttribute('name', c.name || 'Filedata'),
            m.setAttribute('accept', u.join(',')),
            n.extend(m.style, { fontSize: '999px', opacity: 0 }),
            h.appendChild(m),
            d.appendChild(h),
            n.extend(m.style, { position: 'absolute', top: 0, left: 0, width: '100%', height: '100%' }),
            'IE' === s.browser &&
              s.verComp(s.version, 10, '<') &&
              n.extend(m.style, { filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity=0)' }),
            (m.onchange = function () {
              var n;
              if (this.value) {
                if (this.files) {
                  if (((n = this.files[0]), 0 === n.size)) return void h.parentNode.removeChild(h);
                } else n = { name: this.value };
                (n = new t(l.uid, n)),
                  (this.onchange = function () {}),
                  e.call(o),
                  (o.files = [n]),
                  m.setAttribute('id', n.uid),
                  h.setAttribute('id', n.uid + '_form'),
                  o.trigger('change'),
                  (m = h = null);
              }
            }),
            l.can('summon_file_dialog') &&
              ((p = i.get(c.browse_button)),
              r.removeEvent(p, 'click', o.uid),
              r.addEvent(
                p,
                'click',
                function (e) {
                  m && !m.disabled && m.click(), e.preventDefault();
                },
                o.uid,
              )),
            (a = g),
            (d = f = p = null);
        }
        var a,
          u = [],
          c,
          l;
        n.extend(this, {
          init: function (t) {
            var n = this,
              s = n.getRuntime(),
              a;
            (c = t),
              (u = t.accept.mimes || o.extList2mimes(t.accept, s.can('filter_by_extension'))),
              (a = s.getShimContainer()),
              (function () {
                var e, o, u;
                (e = i.get(t.browse_button)),
                  (l = i.getStyle(e, 'z-index') || 'auto'),
                  s.can('summon_file_dialog') &&
                    ('static' === i.getStyle(e, 'position') && (e.style.position = 'relative'),
                    n.bind('Refresh', function () {
                      (o = parseInt(l, 10) || 1),
                        (i.get(c.browse_button).style.zIndex = o),
                        (this.getRuntime().getShimContainer().style.zIndex = o - 1);
                    })),
                  (u = s.can('summon_file_dialog') ? e : a),
                  r.addEvent(
                    u,
                    'mouseover',
                    function () {
                      n.trigger('mouseenter');
                    },
                    n.uid,
                  ),
                  r.addEvent(
                    u,
                    'mouseout',
                    function () {
                      n.trigger('mouseleave');
                    },
                    n.uid,
                  ),
                  r.addEvent(
                    u,
                    'mousedown',
                    function () {
                      n.trigger('mousedown');
                    },
                    n.uid,
                  ),
                  r.addEvent(
                    i.get(t.container),
                    'mouseup',
                    function () {
                      n.trigger('mouseup');
                    },
                    n.uid,
                  ),
                  (e = null);
              })(),
              e.call(this),
              (a = null),
              n.trigger({ type: 'ready', async: !0 });
          },
          disable: function (e) {
            var t;
            (t = i.get(a)) && (t.disabled = !!e);
          },
          destroy: function () {
            var e = this.getRuntime(),
              t = e.getShim(),
              n = e.getShimContainer(),
              o = c && i.get(c.container),
              s = c && i.get(c.browse_button);
            o && r.removeAllEvents(o, this.uid),
              s && (r.removeAllEvents(s, this.uid), (s.style.zIndex = l)),
              n && (r.removeAllEvents(n, this.uid), (n.innerHTML = '')),
              t.removeInstance(this.uid),
              (a = u = c = n = o = s = t = null);
          },
        });
      }
      return (e.FileInput = a);
    }),
    i(P, [F, L], function (e, t) {
      return (e.FileReader = t);
    }),
    i(q, [F, u, p, x, f, C, w, O], function (e, t, n, i, r, o, s, a) {
      function u() {
        function e(e) {
          var t = this,
            i,
            r,
            s,
            a,
            u = !1;
          if (l) {
            if (((i = l.id.replace(/_iframe$/, '')), (r = n.get(i + '_form')))) {
              for (s = r.getElementsByTagName('input'), a = s.length; a--; )
                switch (s[a].getAttribute('type')) {
                  case 'hidden':
                    s[a].parentNode.removeChild(s[a]);
                    break;
                  case 'file':
                    u = !0;
                }
              (s = []), u || r.parentNode.removeChild(r), (r = null);
            }
            setTimeout(function () {
              o.removeEvent(l, 'load', t.uid), l.parentNode && l.parentNode.removeChild(l);
              var n = t.getRuntime().getShimContainer();
              n.children.length || n.parentNode.removeChild(n), (n = l = null), e();
            }, 1);
          }
        }
        var u, c, l;
        t.extend(this, {
          send: function (d, p) {
            function f() {
              var n = m.getShimContainer() || document.body,
                r = document.createElement('div');
              (r.innerHTML =
                '<iframe id="' +
                g +
                '_iframe" name="' +
                g +
                '_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>'),
                (l = r.firstChild),
                n.appendChild(l),
                o.addEvent(
                  l,
                  'load',
                  function () {
                    var n;
                    try {
                      (n = l.contentWindow.document || l.contentDocument || window.frames[l.id].document),
                        /^4(0[0-9]|1[0-7]|2[2346])\s/.test(n.title)
                          ? (u = n.title.replace(/^(\d+).*$/, '$1'))
                          : ((u = 200),
                            (c = t.trim(n.body.innerHTML)),
                            h.trigger({ type: 'progress', loaded: c.length, total: c.length }),
                            w && h.trigger({ type: 'uploadprogress', loaded: w.size || 1025, total: w.size || 1025 }));
                    } catch (r) {
                      if (!i.hasSameOrigin(d.url))
                        return void e.call(h, function () {
                          h.trigger('error');
                        });
                      u = 404;
                    }
                    e.call(h, function () {
                      h.trigger('load');
                    });
                  },
                  h.uid,
                );
            }
            var h = this,
              m = h.getRuntime(),
              g,
              v,
              y,
              w;
            if (((u = c = null), p instanceof a && p.hasBlob())) {
              if (((w = p.getBlob()), (g = w.uid), (y = n.get(g)), (v = n.get(g + '_form')), !v))
                throw new r.DOMException(r.DOMException.NOT_FOUND_ERR);
            } else
              (g = t.guid('uid_')),
                (v = document.createElement('form')),
                v.setAttribute('id', g + '_form'),
                v.setAttribute('method', d.method),
                v.setAttribute('enctype', 'multipart/form-data'),
                v.setAttribute('encoding', 'multipart/form-data'),
                m.getShimContainer().appendChild(v);
            v.setAttribute('target', g + '_iframe'),
              p instanceof a &&
                p.each(function (e, n) {
                  if (e instanceof s) y && y.setAttribute('name', n);
                  else {
                    var i = document.createElement('input');
                    t.extend(i, { type: 'hidden', name: n, value: e }), y ? v.insertBefore(i, y) : v.appendChild(i);
                  }
                }),
              v.setAttribute('action', d.url),
              f(),
              v.submit(),
              h.trigger('loadstart');
          },
          getStatus: function () {
            return u;
          },
          getResponse: function (e) {
            if ('json' === e && 'string' === t.typeOf(c) && window.JSON)
              try {
                return JSON.parse(c.replace(/^\s*<pre[^>]*>/, '').replace(/<\/pre>\s*$/, ''));
              } catch (n) {
                return null;
              }
            return c;
          },
          abort: function () {
            var t = this;
            l &&
              l.contentWindow &&
              (l.contentWindow.stop
                ? l.contentWindow.stop()
                : l.contentWindow.document.execCommand
                ? l.contentWindow.document.execCommand('Stop')
                : (l.src = 'about:blank')),
              e.call(this, function () {
                t.dispatchEvent('abort');
              });
          },
        });
      }
      return (e.XMLHttpRequest = u);
    }),
    s([u, c, l, d, p, f, h, m, g, v, y, w, E, _, b, x, R, O, T, C]);
})(window);
(function (e) {
  'use strict';
  var t = {},
    n = e.moxie.core.utils.Basic.inArray;
  return (
    (function r(e) {
      var i, s;
      for (i in e)
        (s = typeof e[i]),
          s === 'object' && !~n(i, ['Exceptions', 'Env', 'Mime']) ? r(e[i]) : s === 'function' && (t[i] = e[i]);
    })(e.moxie),
    (t.Env = e.moxie.core.utils.Env),
    (t.Mime = e.moxie.core.utils.Mime),
    (t.Exceptions = e.moxie.core.Exceptions),
    (e.mOxie = t),
    e.o || (e.o = t),
    t
  );
})(window);

/**
 * Plupload - multi-runtime File Uploader
 * v2.1.8
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2015-07-21
 */
(function (e, t, n) {
  function s(e) {
    function r(e, t, r) {
      var i = {
        chunks: 'slice_blob',
        jpgresize: 'send_binary_string',
        pngresize: 'send_binary_string',
        progress: 'report_upload_progress',
        multi_selection: 'select_multiple',
        dragdrop: 'drag_and_drop',
        drop_element: 'drag_and_drop',
        headers: 'send_custom_headers',
        urlstream_upload: 'send_binary_string',
        canSendBinary: 'send_binary',
        triggerDialog: 'summon_file_dialog',
      };
      i[e] ? (n[i[e]] = t) : r || (n[e] = t);
    }
    var t = e.required_features,
      n = {};
    if (typeof t == 'string')
      o.each(t.split(/\s*,\s*/), function (e) {
        r(e, !0);
      });
    else if (typeof t == 'object')
      o.each(t, function (e, t) {
        r(t, e);
      });
    else if (t === !0) {
      e.chunk_size > 0 && (n.slice_blob = !0);
      if (e.resize.enabled || !e.multipart) n.send_binary_string = !0;
      o.each(e, function (e, t) {
        r(t, !!e, !0);
      });
    }
    return n;
  }
  var r = e.setTimeout,
    i = {},
    o = {
      VERSION: '2.1.8',
      STOPPED: 1,
      STARTED: 2,
      QUEUED: 1,
      UPLOADING: 2,
      FAILED: 4,
      DONE: 5,
      GENERIC_ERROR: -100,
      HTTP_ERROR: -200,
      IO_ERROR: -300,
      SECURITY_ERROR: -400,
      INIT_ERROR: -500,
      FILE_SIZE_ERROR: -600,
      FILE_EXTENSION_ERROR: -601,
      FILE_DUPLICATE_ERROR: -602,
      IMAGE_FORMAT_ERROR: -700,
      MEMORY_ERROR: -701,
      IMAGE_DIMENSIONS_ERROR: -702,
      mimeTypes: t.mimes,
      ua: t.ua,
      typeOf: t.typeOf,
      extend: t.extend,
      guid: t.guid,
      get: function (n) {
        var r = [],
          i;
        t.typeOf(n) !== 'array' && (n = [n]);
        var s = n.length;
        while (s--) (i = t.get(n[s])), i && r.push(i);
        return r.length ? r : null;
      },
      each: t.each,
      getPos: t.getPos,
      getSize: t.getSize,
      xmlEncode: function (e) {
        var t = { '<': 'lt', '>': 'gt', '&': 'amp', '"': 'quot', "'": '#39' },
          n = /[<>&\"\']/g;
        return e
          ? ('' + e).replace(n, function (e) {
              return t[e] ? '&' + t[e] + ';' : e;
            })
          : e;
      },
      toArray: t.toArray,
      inArray: t.inArray,
      addI18n: t.addI18n,
      translate: t.translate,
      isEmptyObj: t.isEmptyObj,
      hasClass: t.hasClass,
      addClass: t.addClass,
      removeClass: t.removeClass,
      getStyle: t.getStyle,
      addEvent: t.addEvent,
      removeEvent: t.removeEvent,
      removeAllEvents: t.removeAllEvents,
      cleanName: function (e) {
        var t, n;
        n = [
          /[\300-\306]/g,
          'A',
          /[\340-\346]/g,
          'a',
          /\307/g,
          'C',
          /\347/g,
          'c',
          /[\310-\313]/g,
          'E',
          /[\350-\353]/g,
          'e',
          /[\314-\317]/g,
          'I',
          /[\354-\357]/g,
          'i',
          /\321/g,
          'N',
          /\361/g,
          'n',
          /[\322-\330]/g,
          'O',
          /[\362-\370]/g,
          'o',
          /[\331-\334]/g,
          'U',
          /[\371-\374]/g,
          'u',
        ];
        for (t = 0; t < n.length; t += 2) e = e.replace(n[t], n[t + 1]);
        return (e = e.replace(/\s+/g, '_')), (e = e.replace(/[^a-z0-9_\-\.]+/gi, '')), e;
      },
      buildUrl: function (e, t) {
        var n = '';
        return (
          o.each(t, function (e, t) {
            n += (n ? '&' : '') + encodeURIComponent(t) + '=' + encodeURIComponent(e);
          }),
          n && (e += (e.indexOf('?') > 0 ? '&' : '?') + n),
          e
        );
      },
      formatSize: function (e) {
        function t(e, t) {
          return Math.round(e * Math.pow(10, t)) / Math.pow(10, t);
        }
        if (e === n || /\D/.test(e)) return o.translate('N/A');
        var r = Math.pow(1024, 4);
        return e > r
          ? t(e / r, 1) + ' ' + o.translate('tb')
          : e > (r /= 1024)
          ? t(e / r, 1) + ' ' + o.translate('gb')
          : e > (r /= 1024)
          ? t(e / r, 1) + ' ' + o.translate('mb')
          : e > 1024
          ? Math.round(e / 1024) + ' ' + o.translate('kb')
          : e + ' ' + o.translate('b');
      },
      parseSize: t.parseSizeStr,
      predictRuntime: function (e, n) {
        var r, i;
        return (
          (r = new o.Uploader(e)),
          (i = t.Runtime.thatCan(r.getOption().required_features, n || e.runtimes)),
          r.destroy(),
          i
        );
      },
      addFileFilter: function (e, t) {
        i[e] = t;
      },
    };
  o.addFileFilter('mime_types', function (e, t, n) {
    e.length && !e.regexp.test(t.name)
      ? (this.trigger('Error', {
          code: o.FILE_EXTENSION_ERROR,
          message: o.translate('File extension error.'),
          file: t,
        }),
        n(!1))
      : n(!0);
  }),
    o.addFileFilter('max_file_size', function (e, t, n) {
      var r;
      (e = o.parseSize(e)),
        t.size !== r && e && t.size > e
          ? (this.trigger('Error', { code: o.FILE_SIZE_ERROR, message: o.translate('File size error.'), file: t }),
            n(!1))
          : n(!0);
    }),
    o.addFileFilter('prevent_duplicates', function (e, t, n) {
      if (e) {
        var r = this.files.length;
        while (r--)
          if (t.name === this.files[r].name && t.size === this.files[r].size) {
            this.trigger('Error', {
              code: o.FILE_DUPLICATE_ERROR,
              message: o.translate('Duplicate file error.'),
              file: t,
            }),
              n(!1);
            return;
          }
      }
      n(!0);
    }),
    (o.Uploader = function (e) {
      function g() {
        var e,
          t = 0,
          n;
        if (this.state == o.STARTED) {
          for (n = 0; n < f.length; n++)
            !e && f[n].status == o.QUEUED
              ? ((e = f[n]),
                this.trigger('BeforeUpload', e) && ((e.status = o.UPLOADING), this.trigger('UploadFile', e)))
              : t++;
          t == f.length &&
            (this.state !== o.STOPPED && ((this.state = o.STOPPED), this.trigger('StateChanged')),
            this.trigger('UploadComplete', f));
        }
      }
      function y(e) {
        (e.percent = e.size > 0 ? Math.ceil((e.loaded / e.size) * 100) : 100), b();
      }
      function b() {
        var e, t;
        d.reset();
        for (e = 0; e < f.length; e++)
          (t = f[e]),
            t.size !== n ? ((d.size += t.origSize), (d.loaded += (t.loaded * t.origSize) / t.size)) : (d.size = n),
            t.status == o.DONE ? d.uploaded++ : t.status == o.FAILED ? d.failed++ : d.queued++;
        d.size === n
          ? (d.percent = f.length > 0 ? Math.ceil((d.uploaded / f.length) * 100) : 0)
          : ((d.bytesPerSec = Math.ceil(d.loaded / ((+new Date() - p || 1) / 1e3))),
            (d.percent = d.size > 0 ? Math.ceil((d.loaded / d.size) * 100) : 0));
      }
      function w() {
        var e = c[0] || h[0];
        return e ? e.getRuntime().uid : !1;
      }
      function E(e, n) {
        if (e.ruid) {
          var r = t.Runtime.getInfo(e.ruid);
          if (r) return r.can(n);
        }
        return !1;
      }
      function S() {
        this.bind('FilesAdded FilesRemoved', function (e) {
          e.trigger('QueueChanged'), e.refresh();
        }),
          this.bind('CancelUpload', O),
          this.bind('BeforeUpload', C),
          this.bind('UploadFile', k),
          this.bind('UploadProgress', L),
          this.bind('StateChanged', A),
          this.bind('QueueChanged', b),
          this.bind('Error', _),
          this.bind('FileUploaded', M),
          this.bind('Destroy', D);
      }
      function x(e, n) {
        var r = this,
          i = 0,
          s = [],
          u = {
            runtime_order: e.runtimes,
            required_caps: e.required_features,
            preferred_caps: l,
            swf_url: e.flash_swf_url,
            xap_url: e.silverlight_xap_url,
          };
        o.each(e.runtimes.split(/\s*,\s*/), function (t) {
          e[t] && (u[t] = e[t]);
        }),
          e.browse_button &&
            o.each(e.browse_button, function (n) {
              s.push(function (s) {
                var a = new t.FileInput(
                  o.extend({}, u, {
                    accept: e.filters.mime_types,
                    name: e.file_data_name,
                    multiple: e.multi_selection,
                    container: e.container,
                    browse_button: n,
                  }),
                );
                (a.onready = function () {
                  var e = t.Runtime.getInfo(this.ruid);
                  t.extend(r.features, {
                    chunks: e.can('slice_blob'),
                    multipart: e.can('send_multipart'),
                    multi_selection: e.can('select_multiple'),
                  }),
                    i++,
                    c.push(this),
                    s();
                }),
                  (a.onchange = function () {
                    r.addFile(this.files);
                  }),
                  a.bind('mouseenter mouseleave mousedown mouseup', function (r) {
                    v ||
                      (e.browse_button_hover &&
                        ('mouseenter' === r.type
                          ? t.addClass(n, e.browse_button_hover)
                          : 'mouseleave' === r.type && t.removeClass(n, e.browse_button_hover)),
                      e.browse_button_active &&
                        ('mousedown' === r.type
                          ? t.addClass(n, e.browse_button_active)
                          : 'mouseup' === r.type && t.removeClass(n, e.browse_button_active)));
                  }),
                  a.bind('mousedown', function () {
                    r.trigger('Browse');
                  }),
                  a.bind('error runtimeerror', function () {
                    (a = null), s();
                  }),
                  a.init();
              });
            }),
          e.drop_element &&
            o.each(e.drop_element, function (e) {
              s.push(function (n) {
                var s = new t.FileDrop(o.extend({}, u, { drop_zone: e }));
                (s.onready = function () {
                  var e = t.Runtime.getInfo(this.ruid);
                  (r.features.dragdrop = e.can('drag_and_drop')), i++, h.push(this), n();
                }),
                  (s.ondrop = function () {
                    r.addFile(this.files);
                  }),
                  s.bind('error runtimeerror', function () {
                    (s = null), n();
                  }),
                  s.init();
              });
            }),
          t.inSeries(s, function () {
            typeof n == 'function' && n(i);
          });
      }
      function T(e, r, i) {
        var s = new t.Image();
        try {
          (s.onload = function () {
            if (r.width > this.width && r.height > this.height && r.quality === n && r.preserve_headers && !r.crop)
              return this.destroy(), i(e);
            s.downsize(r.width, r.height, r.crop, r.preserve_headers);
          }),
            (s.onresize = function () {
              i(this.getAsBlob(e.type, r.quality)), this.destroy();
            }),
            (s.onerror = function () {
              i(e);
            }),
            s.load(e);
        } catch (o) {
          i(e);
        }
      }
      function N(e, n, r) {
        function f(e, t, n) {
          var r = a[e];
          switch (e) {
            case 'max_file_size':
              e === 'max_file_size' && (a.max_file_size = a.filters.max_file_size = t);
              break;
            case 'chunk_size':
              if ((t = o.parseSize(t))) (a[e] = t), (a.send_file_name = !0);
              break;
            case 'multipart':
              (a[e] = t), t || (a.send_file_name = !0);
              break;
            case 'unique_names':
              (a[e] = t), t && (a.send_file_name = !0);
              break;
            case 'filters':
              o.typeOf(t) === 'array' && (t = { mime_types: t }),
                n ? o.extend(a.filters, t) : (a.filters = t),
                t.mime_types &&
                  (a.filters.mime_types.regexp = (function (e) {
                    var t = [];
                    return (
                      o.each(e, function (e) {
                        o.each(e.extensions.split(/,/), function (e) {
                          /^\s*\*\s*$/.test(e)
                            ? t.push('\\.*')
                            : t.push(
                                '\\.' +
                                  e.replace(
                                    new RegExp('[' + '/^$.*+?|()[]{}\\'.replace(/./g, '\\$&') + ']', 'g'),
                                    '\\$&',
                                  ),
                              );
                        });
                      }),
                      new RegExp('(' + t.join('|') + ')$', 'i')
                    );
                  })(a.filters.mime_types));
              break;
            case 'resize':
              n ? o.extend(a.resize, t, { enabled: !0 }) : (a.resize = t);
              break;
            case 'prevent_duplicates':
              a.prevent_duplicates = a.filters.prevent_duplicates = !!t;
              break;
            case 'browse_button':
            case 'drop_element':
              t = o.get(t);
            case 'container':
            case 'runtimes':
            case 'multi_selection':
            case 'flash_swf_url':
            case 'silverlight_xap_url':
              (a[e] = t), n || (u = !0);
              break;
            default:
              a[e] = t;
          }
          n || i.trigger('OptionChanged', e, t, r);
        }
        var i = this,
          u = !1;
        typeof e == 'object'
          ? o.each(e, function (e, t) {
              f(t, e, r);
            })
          : f(e, n, r),
          r
            ? ((a.required_features = s(o.extend({}, a))), (l = s(o.extend({}, a, { required_features: !0 }))))
            : u &&
              (i.trigger('Destroy'),
              x.call(i, a, function (e) {
                e
                  ? ((i.runtime = t.Runtime.getInfo(w()).type),
                    i.trigger('Init', { runtime: i.runtime }),
                    i.trigger('PostInit'))
                  : i.trigger('Error', { code: o.INIT_ERROR, message: o.translate('Init error.') });
              }));
      }
      function C(e, t) {
        if (e.settings.unique_names) {
          var n = t.name.match(/\.([^.]+)$/),
            r = 'part';
          n && (r = n[1]), (t.target_name = t.id + '.' + r);
        }
      }
      function k(e, n) {
        function h() {
          u-- > 0
            ? r(p, 1e3)
            : ((n.loaded = f),
              e.trigger('Error', {
                code: o.HTTP_ERROR,
                message: o.translate('HTTP Error.'),
                file: n,
                response: m.responseText,
                status: m.status,
                responseHeaders: m.getAllResponseHeaders(),
              }));
        }
        function p() {
          var d,
            v,
            g = {},
            y;
          if (n.status !== o.UPLOADING || e.state === o.STOPPED) return;
          e.settings.send_file_name && (g.name = n.target_name || n.name),
            s && a.chunks && c.size > s
              ? ((y = Math.min(s, c.size - f)), (d = c.slice(f, f + y)))
              : ((y = c.size), (d = c)),
            s &&
              a.chunks &&
              (e.settings.send_chunk_number
                ? ((g.chunk = Math.ceil(f / s)), (g.chunks = Math.ceil(c.size / s)))
                : ((g.offset = f), (g.total = c.size))),
            (m = new t.XMLHttpRequest()),
            m.upload &&
              (m.upload.onprogress = function (t) {
                (n.loaded = Math.min(n.size, f + t.loaded)), e.trigger('UploadProgress', n);
              }),
            (m.onload = function () {
              if (m.status >= 400) {
                h();
                return;
              }
              (u = e.settings.max_retries),
                y < c.size
                  ? (d.destroy(),
                    (f += y),
                    (n.loaded = Math.min(f, c.size)),
                    e.trigger('ChunkUploaded', n, {
                      offset: n.loaded,
                      total: c.size,
                      response: m.responseText,
                      status: m.status,
                      responseHeaders: m.getAllResponseHeaders(),
                    }),
                    t.Env.browser === 'Android Browser' && e.trigger('UploadProgress', n))
                  : (n.loaded = n.size),
                (d = v = null),
                !f || f >= c.size
                  ? (n.size != n.origSize && (c.destroy(), (c = null)),
                    e.trigger('UploadProgress', n),
                    (n.status = o.DONE),
                    e.trigger('FileUploaded', n, {
                      response: m.responseText,
                      status: m.status,
                      responseHeaders: m.getAllResponseHeaders(),
                    }))
                  : r(p, 1);
            }),
            (m.onerror = function () {
              h();
            }),
            (m.onloadend = function () {
              this.destroy(), (m = null);
            }),
            e.settings.multipart && a.multipart
              ? (m.open('post', i, !0),
                o.each(e.settings.headers, function (e, t) {
                  m.setRequestHeader(t, e);
                }),
                (v = new t.FormData()),
                o.each(o.extend(g, e.settings.multipart_params), function (e, t) {
                  v.append(t, e);
                }),
                v.append(e.settings.file_data_name, d),
                m.send(v, {
                  runtime_order: e.settings.runtimes,
                  required_caps: e.settings.required_features,
                  preferred_caps: l,
                  swf_url: e.settings.flash_swf_url,
                  xap_url: e.settings.silverlight_xap_url,
                }))
              : ((i = o.buildUrl(e.settings.url, o.extend(g, e.settings.multipart_params))),
                m.open('post', i, !0),
                m.setRequestHeader('Content-Type', 'application/octet-stream'),
                o.each(e.settings.headers, function (e, t) {
                  m.setRequestHeader(t, e);
                }),
                m.send(d, {
                  runtime_order: e.settings.runtimes,
                  required_caps: e.settings.required_features,
                  preferred_caps: l,
                  swf_url: e.settings.flash_swf_url,
                  xap_url: e.settings.silverlight_xap_url,
                }));
        }
        var i = e.settings.url,
          s = e.settings.chunk_size,
          u = e.settings.max_retries,
          a = e.features,
          f = 0,
          c;
        n.loaded && (f = n.loaded = s ? s * Math.floor(n.loaded / s) : 0),
          (c = n.getSource()),
          e.settings.resize.enabled && E(c, 'send_binary_string') && !!~t.inArray(c.type, ['image/jpeg', 'image/png'])
            ? T.call(this, c, e.settings.resize, function (e) {
                (c = e), (n.size = e.size), p();
              })
            : p();
      }
      function L(e, t) {
        y(t);
      }
      function A(e) {
        if (e.state == o.STARTED) p = +new Date();
        else if (e.state == o.STOPPED)
          for (var t = e.files.length - 1; t >= 0; t--)
            e.files[t].status == o.UPLOADING && ((e.files[t].status = o.QUEUED), b());
      }
      function O() {
        m && m.abort();
      }
      function M(e) {
        b(),
          r(function () {
            g.call(e);
          }, 1);
      }
      function _(e, t) {
        t.code === o.INIT_ERROR
          ? e.destroy()
          : t.code === o.HTTP_ERROR &&
            ((t.file.status = o.FAILED),
            y(t.file),
            e.state == o.STARTED &&
              (e.trigger('CancelUpload'),
              r(function () {
                g.call(e);
              }, 1)));
      }
      function D(e) {
        e.stop(),
          o.each(f, function (e) {
            e.destroy();
          }),
          (f = []),
          c.length &&
            (o.each(c, function (e) {
              e.destroy();
            }),
            (c = [])),
          h.length &&
            (o.each(h, function (e) {
              e.destroy();
            }),
            (h = [])),
          (l = {}),
          (v = !1),
          (p = m = null),
          d.reset();
      }
      var u = o.guid(),
        a,
        f = [],
        l = {},
        c = [],
        h = [],
        p,
        d,
        v = !1,
        m;
      (a = {
        runtimes: t.Runtime.order,
        max_retries: 0,
        chunk_size: 0,
        multipart: !0,
        multi_selection: !0,
        file_data_name: 'file',
        flash_swf_url: 'js/Moxie.swf',
        silverlight_xap_url: 'js/Moxie.xap',
        filters: { mime_types: [], prevent_duplicates: !1, max_file_size: 0 },
        resize: { enabled: !1, preserve_headers: !0, crop: !1 },
        send_file_name: !0,
        send_chunk_number: !0,
      }),
        N.call(this, e, null, !0),
        (d = new o.QueueProgress()),
        o.extend(this, {
          id: u,
          uid: u,
          state: o.STOPPED,
          features: {},
          runtime: null,
          files: f,
          settings: a,
          total: d,
          init: function () {
            var e = this;
            typeof a.preinit == 'function'
              ? a.preinit(e)
              : o.each(a.preinit, function (t, n) {
                  e.bind(n, t);
                }),
              S.call(this);
            if (!a.browse_button || !a.url) {
              this.trigger('Error', { code: o.INIT_ERROR, message: o.translate('Init error.') });
              return;
            }
            x.call(this, a, function (n) {
              typeof a.init == 'function'
                ? a.init(e)
                : o.each(a.init, function (t, n) {
                    e.bind(n, t);
                  }),
                n
                  ? ((e.runtime = t.Runtime.getInfo(w()).type),
                    e.trigger('Init', { runtime: e.runtime }),
                    e.trigger('PostInit'))
                  : e.trigger('Error', { code: o.INIT_ERROR, message: o.translate('Init error.') });
            });
          },
          setOption: function (e, t) {
            N.call(this, e, t, !this.runtime);
          },
          getOption: function (e) {
            return e ? a[e] : a;
          },
          refresh: function () {
            c.length &&
              o.each(c, function (e) {
                e.trigger('Refresh');
              }),
              this.trigger('Refresh');
          },
          start: function () {
            this.state != o.STARTED && ((this.state = o.STARTED), this.trigger('StateChanged'), g.call(this));
          },
          stop: function () {
            this.state != o.STOPPED &&
              ((this.state = o.STOPPED), this.trigger('StateChanged'), this.trigger('CancelUpload'));
          },
          disableBrowse: function () {
            (v = arguments[0] !== n ? arguments[0] : !0),
              c.length &&
                o.each(c, function (e) {
                  e.disable(v);
                }),
              this.trigger('DisableBrowse', v);
          },
          getFile: function (e) {
            var t;
            for (t = f.length - 1; t >= 0; t--) if (f[t].id === e) return f[t];
          },
          addFile: function (e, n) {
            function c(e, n) {
              var r = [];
              t.each(s.settings.filters, function (t, n) {
                i[n] &&
                  r.push(function (r) {
                    i[n].call(s, t, e, function (e) {
                      r(!e);
                    });
                  });
              }),
                t.inSeries(r, n);
            }
            function h(e) {
              var i = t.typeOf(e);
              if (e instanceof t.File) {
                if (!e.ruid && !e.isDetached()) {
                  if (!l) return !1;
                  (e.ruid = l), e.connectRuntime(l);
                }
                h(new o.File(e));
              } else
                e instanceof t.Blob
                  ? (h(e.getSource()), e.destroy())
                  : e instanceof o.File
                  ? (n && (e.name = n),
                    u.push(function (t) {
                      c(e, function (n) {
                        n || (f.push(e), a.push(e), s.trigger('FileFiltered', e)), r(t, 1);
                      });
                    }))
                  : t.inArray(i, ['file', 'blob']) !== -1
                  ? h(new t.File(null, e))
                  : i === 'node' && t.typeOf(e.files) === 'filelist'
                  ? t.each(e.files, h)
                  : i === 'array' && ((n = null), t.each(e, h));
            }
            var s = this,
              u = [],
              a = [],
              l;
            (l = w()),
              h(e),
              u.length &&
                t.inSeries(u, function () {
                  a.length && s.trigger('FilesAdded', a);
                });
          },
          removeFile: function (e) {
            var t = typeof e == 'string' ? e : e.id;
            for (var n = f.length - 1; n >= 0; n--) if (f[n].id === t) return this.splice(n, 1)[0];
          },
          splice: function (e, t) {
            var r = f.splice(e === n ? 0 : e, t === n ? f.length : t),
              i = !1;
            return (
              this.state == o.STARTED &&
                (o.each(r, function (e) {
                  if (e.status === o.UPLOADING) return (i = !0), !1;
                }),
                i && this.stop()),
              this.trigger('FilesRemoved', r),
              o.each(r, function (e) {
                e.destroy();
              }),
              i && this.start(),
              r
            );
          },
          dispatchEvent: function (e) {
            var t, n, r;
            (e = e.toLowerCase()), (t = this.hasEventListener(e));
            if (t) {
              t.sort(function (e, t) {
                return t.priority - e.priority;
              }),
                (n = [].slice.call(arguments)),
                n.shift(),
                n.unshift(this);
              for (var i = 0; i < t.length; i++) if (t[i].fn.apply(t[i].scope, n) === !1) return !1;
            }
            return !0;
          },
          bind: function (e, t, n, r) {
            o.Uploader.prototype.bind.call(this, e, t, r, n);
          },
          destroy: function () {
            this.trigger('Destroy'), (a = d = null), this.unbindAll();
          },
        });
    }),
    (o.Uploader.prototype = t.EventTarget.instance),
    (o.File = (function () {
      function n(n) {
        o.extend(this, {
          id: o.guid(),
          name: n.name || n.fileName,
          type: n.type || '',
          size: n.size || n.fileSize,
          origSize: n.size || n.fileSize,
          loaded: 0,
          percent: 0,
          status: o.QUEUED,
          lastModifiedDate: n.lastModifiedDate || new Date().toLocaleString(),
          getNative: function () {
            var e = this.getSource().getSource();
            return t.inArray(t.typeOf(e), ['blob', 'file']) !== -1 ? e : null;
          },
          getSource: function () {
            return e[this.id] ? e[this.id] : null;
          },
          destroy: function () {
            var t = this.getSource();
            t && (t.destroy(), delete e[this.id]);
          },
        }),
          (e[this.id] = n);
      }
      var e = {};
      return n;
    })()),
    (o.QueueProgress = function () {
      var e = this;
      (e.size = 0),
        (e.loaded = 0),
        (e.uploaded = 0),
        (e.failed = 0),
        (e.queued = 0),
        (e.percent = 0),
        (e.bytesPerSec = 0),
        (e.reset = function () {
          e.size = e.loaded = e.uploaded = e.failed = e.queued = e.percent = e.bytesPerSec = 0;
        });
    }),
    (e.plupload = o);
})(window, window.mOxie);
